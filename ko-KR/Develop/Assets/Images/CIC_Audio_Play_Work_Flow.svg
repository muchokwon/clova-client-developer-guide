<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="845px" preserveAspectRatio="none" style="width:717px;height:845px;" version="1.1" viewBox="0 0 717 845" width="717px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="66.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="192.5" y="171.4473"/><rect fill="#FFFFFF" height="138.4473" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="192.5" y="352.377"/><line style="stroke: #000000; stroke-width: 1.0;" x1="192.5" x2="192.5" y1="352.377" y2="490.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="202.5" y1="352.377" y2="490.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="192.5" x2="202.5" y1="352.377" y2="352.377"/><rect fill="#FFFFFF" height="58.9648" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="192.5" y="555.3066"/><line style="stroke: #000000; stroke-width: 1.0;" x1="192.5" x2="192.5" y1="555.3066" y2="614.2715"/><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="202.5" y1="555.3066" y2="614.2715"/><line style="stroke: #000000; stroke-width: 1.0;" x1="192.5" x2="202.5" y1="614.2715" y2="614.2715"/><rect fill="#FFFFFF" height="142.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="192.5" y="681.2363"/><rect fill="#FFFFFF" height="113.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="588.5" y="238.4121"/><rect fill="#FFFFFF" height="66.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="588.5" y="614.2715"/><rect fill="#FFFFFF" height="321.8594" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="499.5" x="133" y="430.8594"/><line style="stroke: #000000; stroke-width: 1.0;" x1="40" x2="40" y1="102.4824" y2="490.8242"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="40" x2="40" y1="490.8242" y2="555.3066"/><line style="stroke: #000000; stroke-width: 1.0;" x1="40" x2="40" y1="555.3066" y2="833.2012"/><line style="stroke: #000000; stroke-width: 1.0;" x1="197" x2="197" y1="102.4824" y2="490.8242"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="197" x2="197" y1="490.8242" y2="555.3066"/><line style="stroke: #000000; stroke-width: 1.0;" x1="197" x2="197" y1="555.3066" y2="833.2012"/><line style="stroke: #000000; stroke-width: 1.0;" x1="593.5" x2="593.5" y1="102.4824" y2="490.8242"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="593.5" x2="593.5" y1="490.8242" y2="555.3066"/><line style="stroke: #000000; stroke-width: 1.0;" x1="593.5" x2="593.5" y1="555.3066" y2="833.2012"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="18" y="89.8457">사용자</text><ellipse cx="40.5" cy="13" fill="#9EA0CA" rx="8" ry="8" style="stroke: #000000; stroke-width: 2.0;"/><path d="M40.5,21 L40.5,48 M27.5,29 L53.5,29 M40.5,48 L27.5,63 M40.5,48 L53.5,63 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="#9EA0CA" height="53.2295" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="109" x="143" y="48.2529"/><text fill="#FFFFFF" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="160" y="81.4063">클라이언트</text><rect fill="#05D686" height="53.2295" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="58" x="564.5" y="48.2529"/><text fill="#FFFFFF" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="581.5" y="81.4063">CIC</text><rect fill="#FFFFFF" height="66.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="192.5" y="171.4473"/><rect fill="#FFFFFF" height="138.4473" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="192.5" y="352.377"/><line style="stroke: #000000; stroke-width: 1.0;" x1="192.5" x2="192.5" y1="352.377" y2="490.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="202.5" y1="352.377" y2="490.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="192.5" x2="202.5" y1="352.377" y2="352.377"/><rect fill="#FFFFFF" height="58.9648" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="192.5" y="555.3066"/><line style="stroke: #000000; stroke-width: 1.0;" x1="192.5" x2="192.5" y1="555.3066" y2="614.2715"/><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="202.5" y1="555.3066" y2="614.2715"/><line style="stroke: #000000; stroke-width: 1.0;" x1="192.5" x2="202.5" y1="614.2715" y2="614.2715"/><rect fill="#FFFFFF" height="142.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="192.5" y="681.2363"/><rect fill="#FFFFFF" height="113.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="588.5" y="238.4121"/><rect fill="#FFFFFF" height="66.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="588.5" y="614.2715"/><line style="stroke: #000000; stroke-width: 1.0;" x1="190.5" x2="180.5" y1="171.4473" y2="167.4473"/><line style="stroke: #000000; stroke-width: 1.0;" x1="190.5" x2="180.5" y1="171.4473" y2="175.4473"/><line style="stroke: #000000; stroke-width: 1.0;" x1="40.5" x2="191.5" y1="171.4473" y2="171.4473"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="81" x="76" y="140.3281">음악 재생 요청:</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="113" x="60" y="156.8105">"신나는 음악 들려줘."</text><line style="stroke: #000000; stroke-width: 1.0;" x1="586.5" x2="576.5" y1="238.4121" y2="234.4121"/><line style="stroke: #000000; stroke-width: 1.0;" x1="586.5" x2="576.5" y1="238.4121" y2="242.4121"/><line style="stroke: #000000; stroke-width: 1.0;" x1="197.5" x2="587.5" y1="238.4121" y2="238.4121"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="348" y="207.293">사용자 요청 전달</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="251" x="267.5" y="223.7754">(SpeechRecognizer.Recognize 이벤트 메시지)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="598.5" x2="640.5" y1="288.8945" y2="288.8945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="640.5" x2="640.5" y1="288.8945" y2="301.8945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="599.5" x2="640.5" y1="301.8945" y2="301.8945"/><polygon fill="#000000" points="609.5,297.8945,599.5,301.8945,609.5,305.8945,605.5,301.8945" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="615.5" y="274.2578">사용자 발화 분석</text><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="212.5" y1="352.377" y2="348.377"/><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="212.5" y1="352.377" y2="356.377"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="202.5" x2="592.5" y1="352.377" y2="352.377"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="243" x="276.5" y="337.7402">음원 재생 지시(AudioPlayer.Play 지시 메시지)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="244.5" y1="402.8594" y2="402.8594"/><line style="stroke: #000000; stroke-width: 1.0;" x1="244.5" x2="244.5" y1="402.8594" y2="415.8594"/><line style="stroke: #000000; stroke-width: 1.0;" x1="203.5" x2="244.5" y1="415.8594" y2="415.8594"/><polygon fill="#000000" points="213.5,411.8594,203.5,415.8594,213.5,419.8594,209.5,415.8594" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="323" x="219.5" y="388.2227">AudioPlayer.Play 지시 메시지의 audioItem.stream 필드 분석</text><path d="M138,430.8594 L216,430.8594 L216,458.8594 L206,468.8594 L133,468.8594 L133,435.8594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="321.8594" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="499.5" x="133" y="430.8594"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="158" y="455.7051">opt</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222" x="241" y="456.7051">[audioItem.stream.urlPlayable == false]</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="210" x="212" y="528.6699">음원 재생 시작 직전까지 시간이 흐른 후</text><line style="stroke: #000000; stroke-width: 1.0;" x1="586.5" x2="576.5" y1="614.2715" y2="610.2715"/><line style="stroke: #000000; stroke-width: 1.0;" x1="586.5" x2="576.5" y1="614.2715" y2="618.2715"/><line style="stroke: #000000; stroke-width: 1.0;" x1="197.5" x2="587.5" y1="614.2715" y2="614.2715"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="271" x="257.5" y="583.1523">audioItem.stream 필드 정보로 실제 음원 정보 요청</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="255" x="265.5" y="599.6348">(AudioPlayer.StreamRequested 이벤트 메시지)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="212.5" y1="681.2363" y2="677.2363"/><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="212.5" y1="681.2363" y2="685.2363"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="202.5" x2="592.5" y1="681.2363" y2="681.2363"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="326" y="650.1172">재생 가능한 음원 정보 전달</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="220" x="288" y="666.5996">(AudioPlayer.StreamDeliver 지시 메시지)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="244.5" y1="731.7188" y2="731.7188"/><line style="stroke: #000000; stroke-width: 1.0;" x1="244.5" x2="244.5" y1="731.7188" y2="744.7188"/><line style="stroke: #000000; stroke-width: 1.0;" x1="203.5" x2="244.5" y1="744.7188" y2="744.7188"/><polygon fill="#000000" points="213.5,740.7188,203.5,744.7188,213.5,748.7188,209.5,744.7188" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="352" x="219.5" y="717.082">AudioPlayer.StreamDeliver 지시 메시지의 audioStream 필드 분석</text><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="244.5" y1="802.2012" y2="802.2012"/><line style="stroke: #000000; stroke-width: 1.0;" x1="244.5" x2="244.5" y1="802.2012" y2="815.2012"/><line style="stroke: #000000; stroke-width: 1.0;" x1="203.5" x2="244.5" y1="815.2012" y2="815.2012"/><polygon fill="#000000" points="213.5,811.2012,203.5,815.2012,213.5,819.2012,209.5,815.2012" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="219.5" y="787.5645">음원 재생 시작</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam defaultFontName "Noto Sans CJK KR", sans-serif

skinparam note {
  BackgroundColor #9EA0CA
  BorderColor #ffffff
  FontColor #ffffff
  FontSize 14
  FontStyle bold
}

skinparam sequence {
  ArrowColor #000000
  ActorBorderColor #000000
  ActorFontStyle Bolder


  LifeLineBorderColor #000000
  LifeLineBackgroundColor transparent
  ParticipantBorderColor transparent
  ParticipantFontSize 14
  ParticipantFontColor #ffffff
  ParticipantFontStyle bold

  BoxBorderColor #000000
  BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
hide footbox

skinparam activity {
  BackgroundColor #9EA0CA
  BarColor #ffffff
  BorderColor #ffffff
  DiamondBackgroundColor #05D686
  DiamondBorderColor #ffffff
  DiamondFontColor #ffffff
  DiamondFontSize 14
  DiamondFontStyle bold
  FontColor #ffffff 
  FontSize 14
  FontStyle bold
}

actor 사용자 as user
participant 클라이언트 as client #9EA0CA
participant CIC as cic #05D686


user ->> client : 음악 재생 요청:\n"신나는 음악 들려줘."

activate client
  client ->> cic : 사용자 요청 전달\n(SpeechRecognizer.Recognize 이벤트 메시지)
deactivate client

activate cic
  cic -> cic : 사용자 발화 분석
  cic - ->> client : 음원 재생 지시(AudioPlayer.Play 지시 메시지)
deactivate cic

activate client
  client -> client : AudioPlayer.Play 지시 메시지의 audioItem.stream 필드 분석

opt audioItem.stream.urlPlayable == false

... 음원 재생 시작 직전까지 시간이 흐른 후 ...

  client ->> cic : audioItem.stream 필드 정보로 실제 음원 정보 요청\n(AudioPlayer.StreamRequested 이벤트 메시지)
  deactivate client
  activate cic

    cic - ->> client : 재생 가능한 음원 정보 전달\n(AudioPlayer.StreamDeliver 지시 메시지)
  deactivate cic
  activate client
    client -> client : AudioPlayer.StreamDeliver 지시 메시지의 audioStream 필드 분석
end

client -> client : 음원 재생 시작

@enduml

PlantUML version 1.2018.12(Sun Oct 21 19:15:15 KST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: MS949
Language: ko
Country: KR
--></g></svg>