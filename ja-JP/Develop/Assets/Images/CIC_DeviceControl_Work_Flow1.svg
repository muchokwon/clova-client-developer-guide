<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="901px" preserveAspectRatio="none" style="width:748px;height:901px;" version="1.1" viewBox="0 0 748 901" width="748px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="62.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="235" y="164.3984"/><rect fill="#FFFFFF" height="424.3281" style="stroke: #000000; stroke-width: 1.0;" width="10" x="235" y="454.7266"/><rect fill="#FFFFFF" height="374.5938" style="stroke: #000000; stroke-width: 1.0;" width="10" x="549" y="226.6641"/><rect fill="#FFFFFF" height="106.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="549" y="772.7891"/><rect fill="#FFFFFF" height="526.8594" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="590.5" x="13" y="345.1953"/><rect fill="#FFFFFF" height="361.1953" style="stroke: none; stroke-width: 1.0;" width="590.5" x="13" y="510.8594"/><rect fill="#FFFFFF" height="187.6641" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="416.5" x="177" y="677.3906"/><rect fill="#FFFFFF" height="84.2656" style="stroke: none; stroke-width: 1.0;" width="416.5" x="177" y="780.7891"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="56" x2="56" y1="100.1328" y2="889.0547"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="240" x2="240" y1="100.1328" y2="889.0547"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="553.5" x2="553.5" y1="100.1328" y2="889.0547"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="33" y="87.6016">ユーザー</text><ellipse cx="56" cy="13" fill="#9EA0CA" rx="8" ry="8" style="stroke: #000000; stroke-width: 2.0;"/><path d="M56,21 L56,48 M43,29 L69,29 M56,48 L43,63 M56,48 L69,63 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="#9EA0CA" height="50.4883" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="106" x="187" y="48.6445"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="204" y="79.1797">クライアント</text><rect fill="#05D686" height="50.4883" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="59" x="524.5" y="48.6445"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="541.5" y="79.1797">CIC</text><rect fill="#FFFFFF" height="62.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="235" y="164.3984"/><rect fill="#FFFFFF" height="424.3281" style="stroke: #000000; stroke-width: 1.0;" width="10" x="235" y="454.7266"/><rect fill="#FFFFFF" height="374.5938" style="stroke: #000000; stroke-width: 1.0;" width="10" x="549" y="226.6641"/><rect fill="#FFFFFF" height="106.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="549" y="772.7891"/><line style="stroke: #000000; stroke-width: 1.0;" x1="233" x2="223" y1="164.3984" y2="160.3984"/><line style="stroke: #000000; stroke-width: 1.0;" x1="233" x2="223" y1="164.3984" y2="168.3984"/><line style="stroke: #000000; stroke-width: 1.0;" x1="56" x2="234" y1="164.3984" y2="164.3984"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="75.5" y="135.7344">クライアント制御リクエスト：</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="100.5" y="149.8672">"GPSをオンにして"</text><line style="stroke: #000000; stroke-width: 1.0;" x1="547" x2="537" y1="226.6641" y2="222.6641"/><line style="stroke: #000000; stroke-width: 1.0;" x1="547" x2="537" y1="226.6641" y2="230.6641"/><line style="stroke: #000000; stroke-width: 1.0;" x1="240" x2="548" y1="226.6641" y2="226.6641"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="258" x="265.5" y="198">SpeechRecognizer.Recognizeイベントを送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="206" x="291.5" y="212.1328">(Device.DeviceStateコンテキストは必須)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="559" x2="601" y1="317.1953" y2="317.1953"/><line style="stroke: #000000; stroke-width: 1.0;" x1="601" x2="601" y1="317.1953" y2="330.1953"/><line style="stroke: #000000; stroke-width: 1.0;" x1="560" x2="601" y1="330.1953" y2="330.1953"/><polygon fill="#000000" points="570,326.1953,560,330.1953,570,334.1953,566,330.1953" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="160" x="576" y="260.2656">クライアントでサポートされている</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="110" x="576" y="274.3984">動作かどうかを確認する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="576" y="288.5313">(Device.DeviceStateの</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="152" x="576" y="302.6641">actions[]フィールドを確認する)</text><path d="M18,345.1953 L94,345.1953 L94,371.1953 L84,381.1953 L13,381.1953 L13,350.1953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="526.8594" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="590.5" x="13" y="345.1953"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="38" y="367.7969">alt</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="276" x="119" y="368.7969">[リクエストされた動作がサポートされているか == いいえ]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="255" y1="454.7266" y2="450.7266"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="255" y1="454.7266" y2="458.7266"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="245" x2="548" y1="454.7266" y2="454.7266"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="265" x="264.5" y="426.0625">SpeechSynthesizer.Speakディレクティブを送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="226" x="284" y="440.1953">(「リクエストした操作はサポートされていません」)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="56" x2="66" y1="502.8594" y2="498.8594"/><line style="stroke: #000000; stroke-width: 1.0;" x1="56" x2="66" y1="502.8594" y2="506.8594"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56" x2="234" y1="502.8594" y2="502.8594"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="84.5" y="488.3281">音声メッセージを出力する</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="603.5" y1="511.8594" y2="511.8594"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="266" x="28" y="533.4609">[リクエストされた動作がサポートされているか == はい]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="255" y1="601.2578" y2="597.2578"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="255" y1="601.2578" y2="605.2578"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="245" x2="553" y1="601.2578" y2="601.2578"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="200" x="299.5" y="572.5938">クライアント制御ディレクティブを送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="204" x="297.5" y="586.7266">(DeviceControl.TurnOnディレクティブ)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="287" y1="649.3906" y2="649.3906"/><line style="stroke: #000000; stroke-width: 1.0;" x1="287" x2="287" y1="649.3906" y2="662.3906"/><line style="stroke: #000000; stroke-width: 1.0;" x1="246" x2="287" y1="662.3906" y2="662.3906"/><polygon fill="#000000" points="256,658.3906,246,662.3906,256,666.3906,252,662.3906" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="162" x="262" y="634.8594">デバイス制御リクエストを処理する</text><path d="M182,677.3906 L258,677.3906 L258,703.3906 L248,713.3906 L177,713.3906 L177,682.3906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="187.6641" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="416.5" x="177" y="677.3906"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="202" y="699.9922">alt</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="283" y="700.9922">[デバイス制御の処理結果 == 成功]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="547" x2="537" y1="772.7891" y2="768.7891"/><line style="stroke: #000000; stroke-width: 1.0;" x1="547" x2="537" y1="772.7891" y2="776.7891"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="548" y1="772.7891" y2="772.7891"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="261" x="266.5" y="758.2578">DeviceControl.ActionExecutedイベントを送信する</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="177" x2="593.5" y1="781.7891" y2="781.7891"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="192" y="803.3906">[デバイス制御の処理結果 == 失敗]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="547" x2="537" y1="857.0547" y2="853.0547"/><line style="stroke: #000000; stroke-width: 1.0;" x1="547" x2="537" y1="857.0547" y2="861.0547"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="548" y1="857.0547" y2="857.0547"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="242" x="276" y="842.5234">DeviceControl.ActionFailedイベントを送信する</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam defaultFontName "Malgun Gothic", sans-serif

skinparam note {
  BackgroundColor #9EA0CA
  BorderColor #ffffff
  FontColor #ffffff
  FontSize 14
  FontStyle bold
}

skinparam sequence {
  ArrowColor #000000
  ActorBorderColor #000000
  ActorFontStyle Bolder


  LifeLineBorderColor #000000
  LifeLineBackgroundColor transparent
  ParticipantBorderColor transparent
  ParticipantFontSize 14
  ParticipantFontColor #ffffff
  ParticipantFontStyle bold

  BoxBorderColor #000000
  BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
hide footbox

skinparam activity {
  BackgroundColor #9EA0CA
  BarColor #ffffff
  BorderColor #ffffff
  DiamondBackgroundColor #05D686
  DiamondBorderColor #ffffff
  DiamondFontColor #ffffff
  DiamondFontSize 14
  DiamondFontStyle bold
  FontColor #ffffff 
  FontSize 14
  FontStyle bold
}

actor ユーザー as user #9EA0CA
participant クライアント as client #9EA0CA
participant CIC as cic #05D686

user ->> client : クライアント制御リクエスト：\n"GPSをオンにして"

activate client
  client ->> cic : SpeechRecognizer.Recognizeイベントを送信する\n(Device.DeviceStateコンテキストは必須)

deactivate client

activate cic
  cic -> cic : クライアントでサポートされている\n動作かどうかを確認する\n(Device.DeviceStateの\nactions[]フィールドを確認する)

  alt リクエストされた動作がサポートされているか == いいえ

    cic - ->> client : SpeechSynthesizer.Speakディレクティブを送信する\n(「リクエストした操作はサポートされていません」)

	activate client
    client - ->> user : 音声メッセージを出力する

  else リクエストされた動作がサポートされているか == はい

    cic - ->> client : クライアント制御ディレクティブを送信する\n(DeviceControl.TurnOnディレクティブ)

	deactivate cic
    client -> client : デバイス制御リクエストを処理する

    alt デバイス制御の処理結果 == 成功

      client ->> cic : DeviceControl.ActionExecutedイベントを送信する

	  activate cic

    else デバイス制御の処理結果 == 失敗

      client ->> cic : DeviceControl.ActionFailedイベントを送信する

    end

  end

  deactivate client

deactivate cic

@enduml

PlantUML version 1.2018.12(Sun Oct 21 19:15:15 KST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11+28
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: US-ASCII
Language: en
Country: KR
--></g></svg>