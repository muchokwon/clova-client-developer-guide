<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="923px" preserveAspectRatio="none" style="width:836px;height:923px;" version="1.1" viewBox="0 0 836 923" width="836px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="64.1875" style="stroke: #000000; stroke-width: 1.0;" width="10" x="269" y="167.2813"/><rect fill="#FFFFFF" height="433.9375" style="stroke: #000000; stroke-width: 1.0;" width="10" x="269" y="467.2188"/><rect fill="#FFFFFF" height="386.125" style="stroke: #000000; stroke-width: 1.0;" width="10" x="605" y="231.4688"/><rect fill="#FFFFFF" height="108.1875" style="stroke: #000000; stroke-width: 1.0;" width="10" x="605" y="792.9688"/><rect fill="#FFFFFF" height="540.3125" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="646" x="13" y="353.8438"/><rect fill="#FFFFFF" height="369.8438" style="stroke: none; stroke-width: 1.0;" width="646" x="13" y="524.3125"/><rect fill="#FFFFFF" height="192.4688" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="447" x="202" y="694.6875"/><rect fill="#FFFFFF" height="86.1875" style="stroke: none; stroke-width: 1.0;" width="447" x="202" y="800.9688"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="62" x2="62" y1="101.0938" y2="911.1563"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="274" x2="274" y1="101.0938" y2="911.1563"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="610" x2="610" y1="101.0938" y2="911.1563"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="33" y="88.457">ユーザー</text><ellipse cx="62" cy="13" fill="#9EA0CA" rx="8" ry="8" style="stroke: #000000; stroke-width: 2.0;"/><path d="M62,21 L62,48 M49,29 L75,29 M62,48 L49,63 M62,48 L75,63 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="#9EA0CA" height="51.6094" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="124" x="212" y="48.4844"/><text fill="#FFFFFF" font-family="Noto Sans CJK JP" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="229" y="80.0176">クライアント</text><rect fill="#05D686" height="51.6094" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="58" x="581" y="48.4844"/><text fill="#FFFFFF" font-family="Noto Sans CJK JP" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="598" y="80.0176">CIC</text><rect fill="#FFFFFF" height="64.1875" style="stroke: #000000; stroke-width: 1.0;" width="10" x="269" y="167.2813"/><rect fill="#FFFFFF" height="433.9375" style="stroke: #000000; stroke-width: 1.0;" width="10" x="269" y="467.2188"/><rect fill="#FFFFFF" height="386.125" style="stroke: #000000; stroke-width: 1.0;" width="10" x="605" y="231.4688"/><rect fill="#FFFFFF" height="108.1875" style="stroke: #000000; stroke-width: 1.0;" width="10" x="605" y="792.9688"/><line style="stroke: #000000; stroke-width: 1.0;" x1="267" x2="257" y1="167.2813" y2="163.2813"/><line style="stroke: #000000; stroke-width: 1.0;" x1="267" x2="257" y1="167.2813" y2="171.2813"/><line style="stroke: #000000; stroke-width: 1.0;" x1="62" x2="268" y1="167.2813" y2="167.2813"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="168" x="81.5" y="137.5508">クライアント制御リクエスト：</text><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="113" y="152.6445">"GPSをオンにして"</text><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="231.4688" y2="227.4688"/><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="231.4688" y2="235.4688"/><line style="stroke: #000000; stroke-width: 1.0;" x1="274" x2="604" y1="231.4688" y2="231.4688"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="273" x="303" y="201.7383">SpeechRecognizer.Recognizeイベントを送信する</text><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="221" x="329" y="216.832">(Device.DeviceStateコンテキストは必須)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="615" x2="657" y1="325.8438" y2="325.8438"/><line style="stroke: #000000; stroke-width: 1.0;" x1="657" x2="657" y1="325.8438" y2="338.8438"/><line style="stroke: #000000; stroke-width: 1.0;" x1="616" x2="657" y1="338.8438" y2="338.8438"/><polygon fill="#000000" points="626,334.8438,616,338.8438,626,342.8438,622,338.8438" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192" x="632" y="265.9258">クライアントでサポートされている</text><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="132" x="632" y="281.0195">動作かどうかを確認する</text><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="632" y="296.1133">(Device.DeviceStateの</text><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="170" x="632" y="311.207">actions[]フィールドを確認する)</text><path d="M18,353.8438 L92,353.8438 L92,380.8438 L82,390.8438 L13,390.8438 L13,358.8438 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="540.3125" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="646" x="13" y="353.8438"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="38" y="377.3008">alt</text><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="340" x="117" y="378.3008">[リクエストされた動作がサポートされているか == いいえ]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="289" y1="467.2188" y2="463.2188"/><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="289" y1="467.2188" y2="471.2188"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="604" y1="467.2188" y2="467.2188"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="287" x="298.5" y="437.4883">SpeechSynthesizer.Speakディレクティブを送信する</text><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="284" x="300" y="452.582">(「リクエストした操作はサポートされていません」)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="62" x2="72" y1="516.3125" y2="512.3125"/><line style="stroke: #000000; stroke-width: 1.0;" x1="62" x2="72" y1="516.3125" y2="520.3125"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="62" x2="268" y1="516.3125" y2="516.3125"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="93.5" y="501.6758">音声メッセージを出力する</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="659" y1="525.3125" y2="525.3125"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="327" x="28" y="547.7695">[リクエストされた動作がサポートされているか == はい]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="289" y1="617.5938" y2="613.5938"/><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="289" y1="617.5938" y2="621.5938"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="609" y1="617.5938" y2="617.5938"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="240" x="324.5" y="587.8633">クライアント制御ディレクティブを送信する</text><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="213" x="338" y="602.957">(DeviceControl.TurnOnディレクティブ)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="321" y1="666.6875" y2="666.6875"/><line style="stroke: #000000; stroke-width: 1.0;" x1="321" x2="321" y1="666.6875" y2="679.6875"/><line style="stroke: #000000; stroke-width: 1.0;" x1="280" x2="321" y1="679.6875" y2="679.6875"/><polygon fill="#000000" points="290,675.6875,280,679.6875,290,683.6875,286,679.6875" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192" x="296" y="652.0508">デバイス制御リクエストを処理する</text><path d="M207,694.6875 L281,694.6875 L281,721.6875 L271,731.6875 L202,731.6875 L202,699.6875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="192.4688" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="447" x="202" y="694.6875"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="227" y="718.1445">alt</text><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="197" x="306" y="719.1445">[デバイス制御の処理結果 == 成功]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="792.9688" y2="788.9688"/><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="792.9688" y2="796.9688"/><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="604" y1="792.9688" y2="792.9688"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="271" x="306.5" y="778.332">DeviceControl.ActionExecutedイベントを送信する</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="202" x2="649" y1="801.9688" y2="801.9688"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="197" x="217" y="824.4258">[デバイス制御の処理結果 == 失敗]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="879.1563" y2="875.1563"/><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="879.1563" y2="883.1563"/><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="604" y1="879.1563" y2="879.1563"/><text fill="#000000" font-family="Noto Sans CJK JP" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="255" x="314.5" y="864.5195">DeviceControl.ActionFailedイベントを送信する</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam defaultFontName "Noto Sans CJK JP"

skinparam note {
  BackgroundColor #9EA0CA
  BorderColor #ffffff
  FontColor #ffffff
  FontSize 14
  FontStyle bold
}

skinparam sequence {
  ArrowColor #000000
  ActorBorderColor #000000
  ActorFontStyle Bolder


  LifeLineBorderColor #000000
  LifeLineBackgroundColor transparent
  ParticipantBorderColor transparent
  ParticipantFontSize 14
  ParticipantFontColor #ffffff
  ParticipantFontStyle bold

  BoxBorderColor #000000
  BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
hide footbox

skinparam activity {
  BackgroundColor #9EA0CA
  BarColor #ffffff
  BorderColor #ffffff
  DiamondBackgroundColor #05D686
  DiamondBorderColor #ffffff
  DiamondFontColor #ffffff
  DiamondFontSize 14
  DiamondFontStyle bold
  FontColor #ffffff 
  FontSize 14
  FontStyle bold
}

actor ユーザー as user #9EA0CA
participant クライアント as client #9EA0CA
participant CIC as cic #05D686

user ->> client : クライアント制御リクエスト：\n"GPSをオンにして"

activate client
  client ->> cic : SpeechRecognizer.Recognizeイベントを送信する\n(Device.DeviceStateコンテキストは必須)

deactivate client

activate cic
  cic -> cic : クライアントでサポートされている\n動作かどうかを確認する\n(Device.DeviceStateの\nactions[]フィールドを確認する)

  alt リクエストされた動作がサポートされているか == いいえ

    cic - ->> client : SpeechSynthesizer.Speakディレクティブを送信する\n(「リクエストした操作はサポートされていません」)

	activate client
    client - ->> user : 音声メッセージを出力する

  else リクエストされた動作がサポートされているか == はい

    cic - ->> client : クライアント制御ディレクティブを送信する\n(DeviceControl.TurnOnディレクティブ)

	deactivate cic
    client -> client : デバイス制御リクエストを処理する

    alt デバイス制御の処理結果 == 成功

      client ->> cic : DeviceControl.ActionExecutedイベントを送信する

	  activate cic

    else デバイス制御の処理結果 == 失敗

      client ->> cic : DeviceControl.ActionFailedイベントを送信する

    end

  end

  deactivate client

deactivate cic

@enduml

PlantUML version 1.2019.09(Tue Aug 27 01:19:51 JST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_202-b08
Operating System: Windows 10
OS Version: 10.0
Default Encoding: MS932
Language: ja
Country: JP
--></g></svg>