<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="745.6842px" preserveAspectRatio="none" style="width:873px;height:745px;" version="1.1" viewBox="0 0 873 745" width="873.5158px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="57.6776" style="stroke: #000000; stroke-width: 0.9263157894736842;" width="9.2632" x="242.6947" y="152.2849"/><rect fill="#FFFFFF" height="121.7164" style="stroke: #FFFFFF; stroke-width: 0.9263157894736842;" width="9.2632" x="242.6947" y="311.177"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="242.6947" x2="242.6947" y1="311.177" y2="432.8934"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="251.9579" x2="251.9579" y1="311.177" y2="432.8934"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="242.6947" x2="251.9579" y1="311.177" y2="311.177"/><rect fill="#FFFFFF" height="50.2671" style="stroke: #FFFFFF; stroke-width: 0.9263157894736842;" width="9.2632" x="242.6947" y="490.448"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="242.6947" x2="242.6947" y1="490.448" y2="540.7151"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="251.9579" x2="251.9579" y1="490.448" y2="540.7151"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="242.6947" x2="251.9579" y1="540.7151" y2="540.7151"/><rect fill="#FFFFFF" height="128.0776" style="stroke: #000000; stroke-width: 0.9263157894736842;" width="9.2632" x="242.6947" y="598.3928"/><rect fill="#FFFFFF" height="101.2145" style="stroke: #000000; stroke-width: 0.9263157894736842;" width="9.2632" x="724.3789" y="209.9625"/><rect fill="#FFFFFF" height="57.6776" style="stroke: #000000; stroke-width: 0.9263157894736842;" width="9.2632" x="724.3789" y="540.7151"/><rect fill="#FFFFFF" height="280.7316" rx="4.6316" ry="4.6316" style="stroke: #000000; stroke-width: 1.8526315789473684;" width="576.6316" x="188.9684" y="381.7"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="37.9789" x2="37.9789" y1="92.7546" y2="432.8934"/><line style="stroke: #000000; stroke-width: 0.9263157894736842; stroke-dasharray: 1.0,4.0;" x1="37.9789" x2="37.9789" y1="432.8934" y2="490.448"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="37.9789" x2="37.9789" y1="490.448" y2="734.8072"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="247.3263" x2="247.3263" y1="92.7546" y2="432.8934"/><line style="stroke: #000000; stroke-width: 0.9263157894736842; stroke-dasharray: 1.0,4.0;" x1="247.3263" x2="247.3263" y1="432.8934" y2="490.448"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="247.3263" x2="247.3263" y1="490.448" y2="734.8072"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="728.5474" x2="728.5474" y1="92.7546" y2="432.8934"/><line style="stroke: #000000; stroke-width: 0.9263157894736842; stroke-dasharray: 1.0,4.0;" x1="728.5474" x2="728.5474" y1="432.8934" y2="490.448"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="728.5474" x2="728.5474" y1="490.448" y2="734.8072"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37.0526" x="16.6737" y="81.1467">ユーザー</text><ellipse cx="37.9789" cy="12.0421" fill="#9EA0CA" rx="7.4105" ry="7.4105" style="stroke: #000000; stroke-width: 1.8526315789473684;"/><path d="M37.9789,19.4526 L37.9789,44.4632 M25.9368,26.8632 L50.0211,26.8632 M37.9789,44.4632 L25.9368,58.3579 M37.9789,44.4632 L50.0211,58.3579 " fill="none" style="stroke: #000000; stroke-width: 1.8526315789473684;"/><rect fill="#9EA0CA" height="46.7681" rx="4.6316" ry="4.6316" style="stroke: #FFFFFF; stroke-width: 1.3894736842105262;" width="98.1895" x="198.2316" y="45.0602"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12.9684" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="66.6947" x="213.9789" y="73.3454">クライアント</text><rect fill="#05D686" height="46.7681" rx="4.6316" ry="4.6316" style="stroke: #FFFFFF; stroke-width: 1.3894736842105262;" width="54.6526" x="701.6842" y="45.0602"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12.9684" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23.1579" x="717.4316" y="73.3454">CIC</text><rect fill="#FFFFFF" height="57.6776" style="stroke: #000000; stroke-width: 0.9263157894736842;" width="9.2632" x="242.6947" y="152.2849"/><rect fill="#FFFFFF" height="121.7164" style="stroke: #FFFFFF; stroke-width: 0.9263157894736842;" width="9.2632" x="242.6947" y="311.177"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="242.6947" x2="242.6947" y1="311.177" y2="432.8934"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="251.9579" x2="251.9579" y1="311.177" y2="432.8934"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="242.6947" x2="251.9579" y1="311.177" y2="311.177"/><rect fill="#FFFFFF" height="50.2671" style="stroke: #FFFFFF; stroke-width: 0.9263157894736842;" width="9.2632" x="242.6947" y="490.448"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="242.6947" x2="242.6947" y1="490.448" y2="540.7151"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="251.9579" x2="251.9579" y1="490.448" y2="540.7151"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="242.6947" x2="251.9579" y1="540.7151" y2="540.7151"/><rect fill="#FFFFFF" height="128.0776" style="stroke: #000000; stroke-width: 0.9263157894736842;" width="9.2632" x="242.6947" y="598.3928"/><rect fill="#FFFFFF" height="101.2145" style="stroke: #000000; stroke-width: 0.9263157894736842;" width="9.2632" x="724.3789" y="209.9625"/><rect fill="#FFFFFF" height="57.6776" style="stroke: #000000; stroke-width: 0.9263157894736842;" width="9.2632" x="724.3789" y="540.7151"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="240.8421" x2="231.5789" y1="152.2849" y2="148.5796"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="240.8421" x2="231.5789" y1="152.2849" y2="155.9901"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="37.9789" x2="241.7684" y1="152.2849" y2="152.2849"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="168.5895" x="56.0421" y="125.7329">音楽を再生するようにリクエストする：</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="92.6316" x="94.0211" y="138.8243">「楽しい曲を再生して」</text><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="722.5263" x2="713.2632" y1="209.9625" y2="206.2572"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="722.5263" x2="713.2632" y1="209.9625" y2="213.6678"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="247.3263" x2="723.4526" y1="209.9625" y2="209.9625"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="138.9474" x="416.3789" y="183.4105">ユーザーのリクエストを送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="200.0842" x="385.8105" y="196.502">(SpeechRecognizer.Recognizeイベント)</text><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="733.6421" x2="772.5474" y1="254.5487" y2="254.5487"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="772.5474" x2="772.5474" y1="254.5487" y2="266.5908"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="734.5684" x2="772.5474" y1="266.5908" y2="266.5908"/><polygon fill="#000000" points="743.8316,262.8855,734.5684,266.5908,743.8316,270.2961,740.1263,266.5908" style="stroke: #000000; stroke-width: 0.9263157894736842;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="113.0105" x="749.3895" y="241.0882">ユーザーの発話を解析する</text><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="251.9579" x2="261.2211" y1="311.177" y2="307.4717"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="251.9579" x2="261.2211" y1="311.177" y2="314.8822"/><line style="stroke: #000000; stroke-width: 0.9263157894736842; stroke-dasharray: 2.0,2.0;" x1="251.9579" x2="728.0842" y1="311.177" y2="311.177"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="271.4105" x="354.7789" y="297.7164">オーディオ再生を指示する(AudioPlayer.Playディレクティブ)</text><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="251.9579" x2="290.8632" y1="355.7632" y2="355.7632"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="290.8632" x2="290.8632" y1="355.7632" y2="367.8053"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="252.8842" x2="290.8632" y1="367.8053" y2="367.8053"/><polygon fill="#000000" points="262.1474,364.1,252.8842,367.8053,262.1474,371.5105,258.4421,367.8053" style="stroke: #000000; stroke-width: 0.9263157894736842;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="348.2947" x="267.7053" y="342.3026">AudioPlayer.PlayディレクティブのaudioItem.streamフィールドを解析する</text><path d="M193.6,381.7 L268.6316,381.7 L268.6316,405.7842 L259.3684,415.0474 L188.9684,415.0474 L188.9684,386.3316 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.9263157894736842;"/><rect fill="none" height="280.7316" rx="4.6316" ry="4.6316" style="stroke: #000000; stroke-width: 1.8526315789473684;" width="576.6316" x="188.9684" y="381.7"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19.4526" x="212.1263" y="402.6362">opt</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="227.8737" x="291.7895" y="403.5625">[audioItem.stream.urlPlayable == false]</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="233.4316" x="266.7789" y="465.8717">オーディオ再生が開始される直前まで時間が経過した後</text><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="722.5263" x2="713.2632" y1="540.7151" y2="537.0099"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="722.5263" x2="713.2632" y1="540.7151" y2="544.4204"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="247.3263" x2="723.4526" y1="540.7151" y2="540.7151"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="436.2947" x="267.7053" y="514.1632">audioItem.streamフィールドの情報を使って、実際のオーディオストリームの情報をリクエストする</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="205.6421" x="383.0316" y="527.2546">(AudioPlayer.StreamRequestedイベント)</text><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="251.9579" x2="261.2211" y1="598.3928" y2="594.6875"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="251.9579" x2="261.2211" y1="598.3928" y2="602.098"/><line style="stroke: #000000; stroke-width: 0.9263157894736842; stroke-dasharray: 2.0,2.0;" x1="251.9579" x2="728.0842" y1="598.3928" y2="598.3928"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="213.0526" x="383.9579" y="571.8408">再生できるオーディオストリームの情報を送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="213.0526" x="383.9579" y="584.9322">(AudioPlayer.StreamDeliverディレクティブ)</text><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="251.9579" x2="290.8632" y1="642.9789" y2="642.9789"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="290.8632" x2="290.8632" y1="642.9789" y2="655.0211"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="252.8842" x2="290.8632" y1="655.0211" y2="655.0211"/><polygon fill="#000000" points="262.1474,651.3158,252.8842,655.0211,262.1474,658.7263,258.4421,655.0211" style="stroke: #000000; stroke-width: 0.9263157894736842;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="374.2316" x="267.7053" y="629.5184">AudioPlayer.StreamDeliverディレクティブのaudioStreamフィールドを解析する</text><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="251.9579" x2="290.8632" y1="706.0914" y2="706.0914"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="290.8632" x2="290.8632" y1="706.0914" y2="718.1336"/><line style="stroke: #000000; stroke-width: 0.9263157894736842;" x1="252.8842" x2="290.8632" y1="718.1336" y2="718.1336"/><polygon fill="#000000" points="262.1474,714.4283,252.8842,718.1336,262.1474,721.8388,258.4421,718.1336" style="stroke: #000000; stroke-width: 0.9263157894736842;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.1158" lengthAdjust="spacingAndGlyphs" textLength="111.1579" x="267.7053" y="692.6309">オーディオ再生を開始する</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam defaultFontName "Malgun Gothic", sans-serif

skinparam note {
  BackgroundColor #9EA0CA
  BorderColor #ffffff
  FontColor #ffffff
  FontSize 14
  FontStyle bold
}

skinparam sequence {
  ArrowColor #000000
  ActorBorderColor #000000
  ActorFontStyle Bolder


  LifeLineBorderColor #000000
  LifeLineBackgroundColor transparent
  ParticipantBorderColor transparent
  ParticipantFontSize 14
  ParticipantFontColor #ffffff
  ParticipantFontStyle bold

  BoxBorderColor #000000
  BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
hide footbox

skinparam activity {
  BackgroundColor #9EA0CA
  BarColor #ffffff
  BorderColor #ffffff
  DiamondBackgroundColor #05D686
  DiamondBorderColor #ffffff
  DiamondFontColor #ffffff
  DiamondFontSize 14
  DiamondFontStyle bold
  FontColor #ffffff 
  FontSize 14
  FontStyle bold
}

actor ユーザー as user #9EA0CA
participant クライアント as client #9EA0CA
participant CIC as cic #05D686


user ->> client : 音楽を再生するようにリクエストする：\n「楽しい曲を再生して」

activate client
  client ->> cic : ユーザーのリクエストを送信する\n(SpeechRecognizer.Recognizeイベント)
deactivate client

activate cic
  cic -> cic : ユーザーの発話を解析する
  cic - ->> client : オーディオ再生を指示する(AudioPlayer.Playディレクティブ)
deactivate cic

activate client
  client -> client : AudioPlayer.PlayディレクティブのaudioItem.streamフィールドを解析する

opt audioItem.stream.urlPlayable == false

... オーディオ再生が開始される直前まで時間が経過した後 ...

  client ->> cic : audioItem.streamフィールドの情報を使って、実際のオーディオストリームの情報をリクエストする\n(AudioPlayer.StreamRequestedイベント)
  deactivate client
  activate cic

    cic - ->> client : 再生できるオーディオストリームの情報を送信する\n(AudioPlayer.StreamDeliverディレクティブ)
  deactivate cic
  activate client
    client -> client : AudioPlayer.StreamDeliverディレクティブのaudioStreamフィールドを解析する
end

client -> client : オーディオ再生を開始する

@enduml

PlantUML version 1.2018.12(Sun Oct 21 19:15:15 KST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11+28
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: US-ASCII
Language: en
Country: KR
--></g></svg>