!include ../../../styles/PlantUML_StyleSheet.puml

actor User as user #9EA0CA
participant Client as client #9EA0CA
participant CIC as cic #05D686


  client -> client : Starts an alarm
  client ->> cic : Reports the start of alarm\n(Alerts.AlertStarted event,\lincludes activateAlerts as a required field in Alert.AlertsState)

  activate cic
  deactivate cic

  user ->> client : Requests to stop the alarm (using an utterance or physical button)

  alt Type of stop alarm request == User utterance

    client ->> cic : Sends a request to stop the alarm\n(SpeechRecognizer.Recognize event)

  activate cic

  else Type of stop alarm request == Physical button

    client ->> cic : Sends a request to stop the alarm\n(Alerts.RequestAlertStop event)

  end

  cic -->> client : Sends the Alerts.StopAlert directive

  deactivate cic

  client ->> cic : Reports the result of stopping the alarm\n(Alerts.AlertStopped event)

  activate cic

    opt Alarm is repeated == Yes

      cic -->> client : Sends the next repeated alarm\n(Alerts.SetAlert directive)

    end

    opt Alarm type == Action timer

      cic -->> client : Sends the directive to perform the user-scheduled action

  deactivate cic

      client -> client : Performs the scheduled action

    end

  deactivate client
  deactivate cic
