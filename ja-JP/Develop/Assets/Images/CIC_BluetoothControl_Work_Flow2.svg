<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1130px" preserveAspectRatio="none" style="width:790px;height:1130px;" version="1.1" viewBox="0 0 790 1130" width="790px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1044.0781" style="stroke: #000000; stroke-width: 1.0;" width="10" x="99.5" y="65.6094"/><rect fill="#FFFFFF" height="221.5625" style="stroke: #000000; stroke-width: 1.0;" width="10" x="389.5" y="241.5938"/><rect fill="#FFFFFF" height="461.6406" style="stroke: #000000; stroke-width: 1.0;" width="10" x="389.5" y="576.4375"/><rect fill="#FFFFFF" height="1044.0781" style="stroke: #000000; stroke-width: 1.0;" width="10" x="707.5" y="65.6094"/><rect fill="#FFFFFF" height="222.6563" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="437" x="322.5" y="128.2188"/><rect fill="#FFFFFF" height="101.2813" style="stroke: none; stroke-width: 1.0;" width="437" x="322.5" y="249.5938"/><rect fill="#FFFFFF" height="567.9219" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="766" x="13" y="478.1563"/><rect fill="#FFFFFF" height="221.0781" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="446.5" x="322.5" y="591.4375"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="104" x2="104" y1="55.6094" y2="1118.6875"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="394.5" x2="394.5" y1="55.6094" y2="1118.6875"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="712.5" x2="712.5" y1="55.6094" y2="1118.6875"/><rect fill="#9EA0CA" height="51.6094" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="163" x="23" y="3"/><text fill="#FFFFFF" font-family="Noto Sans CJK KR" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="40" y="34.5332">Bluetoothデバイス</text><rect fill="#9EA0CA" height="51.6094" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="124" x="332.5" y="3"/><text fill="#FFFFFF" font-family="Noto Sans CJK KR" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="349.5" y="34.5332">クライアント</text><rect fill="#05D686" height="51.6094" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="74" x="675.5" y="3"/><text fill="#FFFFFF" font-family="Noto Sans CJK KR" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="692.5" y="34.5332">Clova</text><rect fill="#FFFFFF" height="1044.0781" style="stroke: #000000; stroke-width: 1.0;" width="10" x="99.5" y="65.6094"/><rect fill="#FFFFFF" height="221.5625" style="stroke: #000000; stroke-width: 1.0;" width="10" x="389.5" y="241.5938"/><rect fill="#FFFFFF" height="461.6406" style="stroke: #000000; stroke-width: 1.0;" width="10" x="389.5" y="576.4375"/><rect fill="#FFFFFF" height="1044.0781" style="stroke: #000000; stroke-width: 1.0;" width="10" x="707.5" y="65.6094"/><polygon fill="#9EA0CA" points="57,70.6094,758,70.6094,768,92.6094,758,115.6094,57,115.6094,47,92.6094,57,70.6094" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#FFFFFF" font-family="Noto Sans CJK KR" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="309" x="253.25" y="99.1426">Bluetoothデバイスとの接続をリクエストする</text><path d="M327.5,128.2188 L401.5,128.2188 L401.5,155.2188 L391.5,165.2188 L322.5,165.2188 L322.5,133.2188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="222.6563" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="437" x="322.5" y="128.2188"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="347.5" y="151.6758">alt</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="236" x="426.5" y="152.6758">[特定のデバイスが指定されたか == はい]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="399.5" x2="409.5" y1="241.5938" y2="237.5938"/><line style="stroke: #000000; stroke-width: 1.0;" x1="399.5" x2="409.5" y1="241.5938" y2="245.5938"/><line style="stroke: #000000; stroke-width: 1.0;" x1="399.5" x2="706.5" y1="241.5938" y2="241.5938"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="216" x="445.5" y="211.8633">DeviceControl.BtConnect (with payload)</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="481.5" y="226.957">ディレクティブを送信する</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="322.5" x2="759.5" y1="250.5938" y2="250.5938"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="249" x="337.5" y="273.0508">[特定のデバイスが指定されたか == いいえ]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="399.5" x2="409.5" y1="342.875" y2="338.875"/><line style="stroke: #000000; stroke-width: 1.0;" x1="399.5" x2="409.5" y1="342.875" y2="346.875"/><line style="stroke: #000000; stroke-width: 1.0;" x1="399.5" x2="706.5" y1="342.875" y2="342.875"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="233" x="437" y="313.1445">DeviceControl.BtConnect (without payload)</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="481.5" y="328.2383">ディレクティブを送信する</text><line style="stroke: #000000; stroke-width: 1.0;" x1="109.5" x2="119.5" y1="398.9688" y2="394.9688"/><line style="stroke: #000000; stroke-width: 1.0;" x1="109.5" x2="119.5" y1="398.9688" y2="402.9688"/><line style="stroke: #000000; stroke-width: 1.0;" x1="109.5" x2="388.5" y1="398.9688" y2="398.9688"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="120" x="189.5" y="384.332">接続をリクエストする</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="695.5" y1="463.1563" y2="459.1563"/><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="695.5" y1="463.1563" y2="467.1563"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="394.5" x2="706.5" y1="463.1563" y2="463.1563"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="264" x="419" y="433.4258">DeviceControl.ActionExecuted (with DeviceState)</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="497" y="448.5195">イベントを送信する</text><path d="M18,478.1563 L96,478.1563 L96,505.1563 L86,515.1563 L13,515.1563 L13,483.1563 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="567.9219" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="766" x="13" y="478.1563"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="38" y="501.6133">opt</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="287" x="121" y="502.6133">[接続するデバイスがPINコードを必要とする場合]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="387.5" x2="377.5" y1="576.4375" y2="572.4375"/><line style="stroke: #000000; stroke-width: 1.0;" x1="387.5" x2="377.5" y1="576.4375" y2="580.4375"/><line style="stroke: #000000; stroke-width: 1.0;" x1="109.5" x2="388.5" y1="576.4375" y2="576.4375"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="152" x="173.5" y="561.8008">PINコードをリクエストする</text><path d="M327.5,591.4375 L587.5,591.4375 L587.5,618.4375 L577.5,628.4375 L322.5,628.4375 L322.5,596.4375 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="221.0781" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="446.5" x="322.5" y="591.4375"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="200" x="347.5" y="614.8945">"ユーザーがPINコードを入力する"</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="695.5" y1="684.7188" y2="680.7188"/><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="695.5" y1="684.7188" y2="688.7188"/><line style="stroke: #000000; stroke-width: 1.0;" x1="399.5" x2="706.5" y1="684.7188" y2="684.7188"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="206" x="450.5" y="654.9883">DeviceControl.BtRequestForPINCode</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="499.5" y="670.082">イベントを送信する</text><polygon fill="#9EA0CA" points="357,697.7188,749,697.7188,759,719.7188,749,742.7188,357,742.7188,347,719.7188,357,697.7188" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#FFFFFF" font-family="Noto Sans CJK KR" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="308" x="399" y="726.252">ユーザーから入力されたPINコードを処理する</text><line style="stroke: #000000; stroke-width: 1.0;" x1="399.5" x2="409.5" y1="804.5156" y2="800.5156"/><line style="stroke: #000000; stroke-width: 1.0;" x1="399.5" x2="409.5" y1="804.5156" y2="808.5156"/><line style="stroke: #000000; stroke-width: 1.0;" x1="399.5" x2="706.5" y1="804.5156" y2="804.5156"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="200" x="453.5" y="774.7852">DeviceControl.BtConnectByPINCode</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="481.5" y="789.8789">ディレクティブを送信する</text><line style="stroke: #000000; stroke-width: 1.0;" x1="109.5" x2="119.5" y1="860.6094" y2="856.6094"/><line style="stroke: #000000; stroke-width: 1.0;" x1="109.5" x2="119.5" y1="860.6094" y2="864.6094"/><line style="stroke: #000000; stroke-width: 1.0;" x1="109.5" x2="388.5" y1="860.6094" y2="860.6094"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="236" x="131.5" y="845.9727">PINコードで接続するようにリクエストする</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="695.5" y1="924.7969" y2="920.7969"/><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="695.5" y1="924.7969" y2="928.7969"/><line style="stroke: #000000; stroke-width: 1.0;" x1="399.5" x2="706.5" y1="924.7969" y2="924.7969"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="163" x="472" y="895.0664">DeviceControl.ActionExecuted</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="499.5" y="910.1602">イベントを送信する</text><line style="stroke: #000000; stroke-width: 1.0;" x1="387.5" x2="377.5" y1="973.8906" y2="969.8906"/><line style="stroke: #000000; stroke-width: 1.0;" x1="387.5" x2="377.5" y1="973.8906" y2="977.8906"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="109.5" x2="388.5" y1="973.8906" y2="973.8906"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="177.5" y="959.2539">デバイスの接続を許可する</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="695.5" y1="1038.0781" y2="1034.0781"/><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="695.5" y1="1038.0781" y2="1042.0781"/><line style="stroke: #000000; stroke-width: 1.0;" x1="394.5" x2="706.5" y1="1038.0781" y2="1038.0781"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="478.5" y="1008.3477">DeviceControl.ReportState</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="497" y="1023.4414">イベントを送信する</text><polygon fill="#9EA0CA" points="57,1058.0781,758,1058.0781,768,1080.0781,758,1103.0781,57,1103.0781,47,1080.0781,57,1058.0781" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#FFFFFF" font-family="Noto Sans CJK KR" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="135" x="340.25" y="1086.6113">接続結果を共有する</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam defaultFontName "Noto Sans CJK KR"

skinparam note {
  BackgroundColor #9EA0CA
  BorderColor #ffffff
  FontColor #ffffff
  FontSize 14
  FontStyle bold
}

skinparam sequence {
  ArrowColor #000000
  ActorBorderColor #000000
  ActorFontStyle Bolder


  LifeLineBorderColor #000000
  LifeLineBackgroundColor transparent
  ParticipantBorderColor transparent
  ParticipantFontSize 14
  ParticipantFontColor #ffffff
  ParticipantFontStyle bold

  BoxBorderColor #000000
  BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
hide footbox

skinparam activity {
  BackgroundColor #9EA0CA
  BarColor #ffffff
  BorderColor #ffffff
  DiamondBackgroundColor #05D686
  DiamondBorderColor #ffffff
  DiamondFontColor #ffffff
  DiamondFontSize 14
  DiamondFontStyle bold
  FontColor #ffffff 
  FontSize 14
  FontStyle bold
}

participant "Bluetoothデバイス" as device #9EA0CA
participant クライアント as client #9EA0CA
participant "Clova" as clova #05D686

activate clova
activate device
hnote over device, clova : Bluetoothデバイスとの接続をリクエストする
 alt 特定のデバイスが指定されたか == はい
	clova ->> client : DeviceControl.BtConnect (with payload)\nディレクティブを送信する

	activate client
 else 特定のデバイスが指定されたか == いいえ
    clova ->> client : DeviceControl.BtConnect (without payload)\nディレクティブを送信する
end

  client ->> device : 接続をリクエストする
  client - ->> clova : DeviceControl.ActionExecuted (with DeviceState)\nイベントを送信する

	deactivate client
opt 接続するデバイスがPINコードを必要とする場合
	device ->> client : PINコードをリクエストする

	activate client

  group "ユーザーがPINコードを入力する"
    client ->> clova : DeviceControl.BtRequestForPINCode\nイベントを送信する
    hnote over client, clova : ユーザーから入力されたPINコードを処理する
    clova ->> client : DeviceControl.BtConnectByPINCode\nディレクティブを送信する
  end
  client ->> device : PINコードで接続するようにリクエストする
  client ->> clova: DeviceControl.ActionExecuted\nイベントを送信する
	device - ->> client : デバイスの接続を許可する
  client ->> clova : DeviceControl.ReportState\nイベントを送信する
deactivate client
end
hnote over device, clova : 接続結果を共有する

@enduml

PlantUML version 1.2019.09(Tue Aug 27 01:19:51 JST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_202-b08
Operating System: Windows 10
OS Version: 10.0
Default Encoding: MS932
Language: ja
Country: JP
--></g></svg>