# CICの概要
このドキュメントでは、Clova Interface Connect（以下、CIC）について説明します。このドキュメントから、CICとは何で、どのような仕組みで動作するかを知ることができます。また、ここではCICに関するガイドとリファレンスも提供されます。

## CICとは? {#WhatisCIC}
CICは、AIアシスタントサービスを提供するパソコン・モバイルアプリ、モバイルデバイスまたは家電製品などのクライアントに、Clovaと連携できるインターフェースを提供するプラットフォームです。CICが提供する[API](/Develop/References/CIC_API.md)を使って、ユーザーのリクエストをClovaに送信し、CICを介して、Clovaからの応答をクライアントに提供します。

![](/Develop/Assets/Images/CIC_Interaction_Structure.png)

## CICの仕組み {#CICInteractionStructure}
クライアントは、CIC APIを使ってユーザーのリクエストをCICに送信し、その応答結果をCICから受け取ります。CICにアクセスするには、[HTTP/2プロトコル](https://tools.ietf.org/html/rfc7540)を使用する必要があります。音声認識、音声出力、オーディオ再生、スケジュール管理、アラーム、タイマー設定などの機能が[CIC API](/Develop/References/CIC_API.md)で提供されています。

CIC APIを使って、クライアントとCICの間でさまざまな通信が発生します。その際、通信の方向によって、次のようなタイプのメッセージが送信されます。

* [イベント](/Develop/References/CIC_API.md#Event)：クライアントからCICに送信するメッセージです。ユーザーのリクエスト（音声入力）や、クライアントのステータス値が変更されたことを示す際に使用されます。

* [ディレクティブ](/Develop/References/CIC_API.md#Directive)：CICからクライアントに対して、具体的なアクションをコントロールするためのメッセージです。例えば、アプリに特定の情報を表示したり、合成された音声を出力するように指示する際に送信されます。ディレクティブは次の状況で使用されます。
    * ユーザーのリクエストに対するレスポンスメッセージとして、主にユーザーの音声が認識された後、クライアントに適切な動作を指示するために送信されます。
    * 特定の条件により、ユーザーからのリクエストなしに、CICからクライアントにディレクティブを送信する場合もあります。

次は、CICとクライアントの間で行われるメッセージのやり取りを表すシーケンス図です。

![](/Develop/Assets/Images/CIC_Interaction_Example_in_Sequence_Diagram.svg)

### 間接ダイアログの仕組み {#IndirectDialogue}
ユーザーとClovaは、一連の対話を交わします。通常、ユーザーはClovaに必要な情報を確認したり、動作を実行するようにリクエストし、Clovaはユーザーに検索した情報や動作の実行結果をレスポンスとして返します。その対話のため、ユーザーとClovaの間に、中継者の役割を担うクライアントとCICがあります。

![](/Develop/Assets/Images/CIC_Structure_Of_Indirect_Dialogue.png)

普通の場合、ユーザーとClovaの対話は、次のようなシンプルなものになります。

1. ユーザーが発話を開始します。
2. クライアントはユーザーの音声をキャプチャし、CICに送信します。
3. CICは、クライアントからユーザーのリクエストを受信し、Clovaが処理した結果をクライアントに返します。
4. クライアントは、CICから受信した結果を、ユーザーに音声で再生するか、または画面に表示します。

ですが、このようにユーザーとClovaの間にクライアントとCICが存在する間接ダイアログは、次のような問題があります。

* リクエストを送信したり、レスポンスを受信するとき、直接の対話より時間がかかります。
* ユーザーが新しいトピックの対話（リクエスト）を開始すると、すぐに対応することが難しいです。

例えば、ユーザーがClovaに「今日の天気はどう？」と聞き、待っていたとします。Clovaが応答する前、または応答している途中で、ユーザーから「楽しい曲をプレイして」とリクエストされることがあります。その場合、「今日の天気はどう？」に対する応答は、もうユーザーにとって必要な内容ではないはずです。

直接の対話なら、容易に応答を中止したりキャンセルできます。ですが、中継方式の対話では、中継者であるクライアント側で状況を判断し、それに応じた動作を実行する必要があります。そのため、クライアントは[ダイアログIDを作成して作業を処理する](/Develop/Guides/Manage_Dialogue_ID_And_Handle_Tasks.md)とき、ダイアログIDを使用する必要があります。
