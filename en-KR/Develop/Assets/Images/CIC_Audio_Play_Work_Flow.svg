<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="805px" preserveAspectRatio="none" style="width:815px;height:805px;" version="1.1" viewBox="0 0 815 805" width="815px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="62.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="226" y="164.3984"/><rect fill="#FFFFFF" height="131.3984" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="226" y="335.9297"/><line style="stroke: #000000; stroke-width: 1.0;" x1="226" x2="226" y1="335.9297" y2="467.3281"/><line style="stroke: #000000; stroke-width: 1.0;" x1="236" x2="236" y1="335.9297" y2="467.3281"/><line style="stroke: #000000; stroke-width: 1.0;" x1="226" x2="236" y1="335.9297" y2="335.9297"/><rect fill="#FFFFFF" height="54.2656" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="226" y="529.4609"/><line style="stroke: #000000; stroke-width: 1.0;" x1="226" x2="226" y1="529.4609" y2="583.7266"/><line style="stroke: #000000; stroke-width: 1.0;" x1="236" x2="236" y1="529.4609" y2="583.7266"/><line style="stroke: #000000; stroke-width: 1.0;" x1="226" x2="236" y1="583.7266" y2="583.7266"/><rect fill="#FFFFFF" height="138.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="226" y="645.9922"/><rect fill="#FFFFFF" height="109.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="644" y="226.6641"/><rect fill="#FFFFFF" height="62.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="644" y="583.7266"/><rect fill="#FFFFFF" height="303.0625" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="506" x="182.5" y="412.0625"/><line style="stroke: #000000; stroke-width: 1.0;" x1="35" x2="35" y1="100.1328" y2="467.3281"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="35" x2="35" y1="467.3281" y2="529.4609"/><line style="stroke: #000000; stroke-width: 1.0;" x1="35" x2="35" y1="529.4609" y2="793.2578"/><line style="stroke: #000000; stroke-width: 1.0;" x1="230.5" x2="230.5" y1="100.1328" y2="467.3281"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="230.5" x2="230.5" y1="467.3281" y2="529.4609"/><line style="stroke: #000000; stroke-width: 1.0;" x1="230.5" x2="230.5" y1="529.4609" y2="793.2578"/><line style="stroke: #000000; stroke-width: 1.0;" x1="648.5" x2="648.5" y1="100.1328" y2="467.3281"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="648.5" x2="648.5" y1="467.3281" y2="529.4609"/><line style="stroke: #000000; stroke-width: 1.0;" x1="648.5" x2="648.5" y1="529.4609" y2="793.2578"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="18" y="87.6016">User</text><ellipse cx="35" cy="13" fill="#9EA0CA" rx="8" ry="8" style="stroke: #000000; stroke-width: 2.0;"/><path d="M35,21 L35,48 M22,29 L48,29 M35,48 L22,63 M35,48 L48,63 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="#9EA0CA" height="50.4883" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="77" x="192.5" y="48.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="209.5" y="79.1797">Client</text><rect fill="#05D686" height="50.4883" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="59" x="619.5" y="48.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="636.5" y="79.1797">CIC</text><rect fill="#FFFFFF" height="62.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="226" y="164.3984"/><rect fill="#FFFFFF" height="131.3984" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="226" y="335.9297"/><line style="stroke: #000000; stroke-width: 1.0;" x1="226" x2="226" y1="335.9297" y2="467.3281"/><line style="stroke: #000000; stroke-width: 1.0;" x1="236" x2="236" y1="335.9297" y2="467.3281"/><line style="stroke: #000000; stroke-width: 1.0;" x1="226" x2="236" y1="335.9297" y2="335.9297"/><rect fill="#FFFFFF" height="54.2656" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="226" y="529.4609"/><line style="stroke: #000000; stroke-width: 1.0;" x1="226" x2="226" y1="529.4609" y2="583.7266"/><line style="stroke: #000000; stroke-width: 1.0;" x1="236" x2="236" y1="529.4609" y2="583.7266"/><line style="stroke: #000000; stroke-width: 1.0;" x1="226" x2="236" y1="583.7266" y2="583.7266"/><rect fill="#FFFFFF" height="138.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="226" y="645.9922"/><rect fill="#FFFFFF" height="109.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="644" y="226.6641"/><rect fill="#FFFFFF" height="62.2656" style="stroke: #000000; stroke-width: 1.0;" width="10" x="644" y="583.7266"/><line style="stroke: #000000; stroke-width: 1.0;" x1="224" x2="214" y1="164.3984" y2="160.3984"/><line style="stroke: #000000; stroke-width: 1.0;" x1="224" x2="214" y1="164.3984" y2="168.3984"/><line style="stroke: #000000; stroke-width: 1.0;" x1="35" x2="225" y1="164.3984" y2="164.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="58.5" y="135.7344">Request music playback:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="152" x="54.5" y="149.8672">"Play some upbeat music."</text><line style="stroke: #000000; stroke-width: 1.0;" x1="642" x2="632" y1="226.6641" y2="222.6641"/><line style="stroke: #000000; stroke-width: 1.0;" x1="642" x2="632" y1="226.6641" y2="230.6641"/><line style="stroke: #000000; stroke-width: 1.0;" x1="231" x2="643" y1="226.6641" y2="226.6641"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="385" y="198">Send user request</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="211" x="332" y="212.1328">(SpeechRecognizer.Recognize event)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="654" x2="696" y1="274.7969" y2="274.7969"/><line style="stroke: #000000; stroke-width: 1.0;" x1="696" x2="696" y1="274.7969" y2="287.7969"/><line style="stroke: #000000; stroke-width: 1.0;" x1="655" x2="696" y1="287.7969" y2="287.7969"/><polygon fill="#000000" points="665,283.7969,655,287.7969,665,291.7969,661,287.7969" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="132" x="671" y="260.2656">Analyze user utterance</text><line style="stroke: #000000; stroke-width: 1.0;" x1="236" x2="246" y1="335.9297" y2="331.9297"/><line style="stroke: #000000; stroke-width: 1.0;" x1="236" x2="246" y1="335.9297" y2="339.9297"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="236" x2="648" y1="335.9297" y2="335.9297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="286" x="299.5" y="321.3984">Direct audio playback (AudioPlayer.Play directive)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="236" x2="278" y1="384.0625" y2="384.0625"/><line style="stroke: #000000; stroke-width: 1.0;" x1="278" x2="278" y1="384.0625" y2="397.0625"/><line style="stroke: #000000; stroke-width: 1.0;" x1="237" x2="278" y1="397.0625" y2="397.0625"/><polygon fill="#000000" points="247,393.0625,237,397.0625,247,401.0625,243,397.0625" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="346" x="253" y="369.5313">Analyze audioItem.stream field of AudioPlayer.Play directive</text><path d="M187.5,412.0625 L268.5,412.0625 L268.5,438.0625 L258.5,448.0625 L182.5,448.0625 L182.5,417.0625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="303.0625" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="506" x="182.5" y="412.0625"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="207.5" y="434.6641">opt</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="246" x="293.5" y="435.6641">[audioItem.stream.urlPlayable == false]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="320" x="182" y="502.9297">Time elapses until right before starting audio playback,</text><line style="stroke: #000000; stroke-width: 1.0;" x1="642" x2="632" y1="583.7266" y2="579.7266"/><line style="stroke: #000000; stroke-width: 1.0;" x1="642" x2="632" y1="583.7266" y2="587.7266"/><line style="stroke: #000000; stroke-width: 1.0;" x1="231" x2="643" y1="583.7266" y2="583.7266"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="361" x="257" y="555.0625">Request actual audio information to the audioItem.stream field</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="217" x="329" y="569.1953">(AudioPlayer.StreamRequested event)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="236" x2="246" y1="645.9922" y2="641.9922"/><line style="stroke: #000000; stroke-width: 1.0;" x1="236" x2="246" y1="645.9922" y2="649.9922"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="236" x2="648" y1="645.9922" y2="645.9922"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="186" x="349.5" y="617.3281">Send playable audio information</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="213" x="336" y="631.4609">(AudioPlayer.StreamDeliver directive)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="236" x2="278" y1="694.125" y2="694.125"/><line style="stroke: #000000; stroke-width: 1.0;" x1="278" x2="278" y1="694.125" y2="707.125"/><line style="stroke: #000000; stroke-width: 1.0;" x1="237" x2="278" y1="707.125" y2="707.125"/><polygon fill="#000000" points="247,703.125,237,707.125,247,711.125,243,707.125" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="374" x="253" y="679.5938">Analyze audioStream field of AudioPlayer.StreamDeliver directive</text><line style="stroke: #000000; stroke-width: 1.0;" x1="236" x2="278" y1="762.2578" y2="762.2578"/><line style="stroke: #000000; stroke-width: 1.0;" x1="278" x2="278" y1="762.2578" y2="775.2578"/><line style="stroke: #000000; stroke-width: 1.0;" x1="237" x2="278" y1="775.2578" y2="775.2578"/><polygon fill="#000000" points="247,771.2578,237,775.2578,247,779.2578,243,775.2578" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="118" x="253" y="747.7266">Start audio playback</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam sequence {
	ArrowColor #000000
	ActorBorderColor #000000
	ActorFontStyle Bolder

	LifeLineBorderColor #000000
	LifeLineBackgroundColor transparent
	ParticipantBorderColor transparent
	ParticipantFontSize 14
	ParticipantFontColor #ffffff
	ParticipantFontStyle bold

	BoxBorderColor #000000
	BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
skinparam note {
	BackgroundColor #9EA0CA
	BorderColor #ffffff
	FontColor #ffffff
	FontSize 14
	FontStyle bold
}
hide footbox

actor User as user #9EA0CA
participant Client as client #9EA0CA
participant CIC as cic #05D686


user ->> client : Request music playback:\n"Play some upbeat music."

activate client
  client ->> cic : Send user request\n(SpeechRecognizer.Recognize event)
deactivate client

activate cic
  cic -> cic : Analyze user utterance
  cic - ->> client : Direct audio playback (AudioPlayer.Play directive)
deactivate cic

activate client
  client -> client : Analyze audioItem.stream field of AudioPlayer.Play directive

opt audioItem.stream.urlPlayable == false

... Time elapses until right before starting audio playback, ...

  client ->> cic : Request actual audio information to the audioItem.stream field\n(AudioPlayer.StreamRequested event)
  deactivate client
  activate cic

    cic - ->> client : Send playable audio information\n(AudioPlayer.StreamDeliver directive)
  deactivate cic
  activate client
    client -> client : Analyze audioStream field of AudioPlayer.StreamDeliver directive
end

client -> client : Start audio playback


@enduml

PlantUML version 1.2018.12(Sun Oct 21 19:15:15 KST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11+28
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: US-ASCII
Language: en
Country: KR
--></g></svg>