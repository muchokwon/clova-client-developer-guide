<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1070px" preserveAspectRatio="none" style="width:784px;height:1070px;" version="1.1" viewBox="0 0 784 1070" width="784px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="360.1953" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="245" y="104.6211"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="245" y1="104.6211" y2="464.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="255" y1="104.6211" y2="464.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="255" y1="104.6211" y2="104.6211"/><rect fill="#FFFFFF" height="522.4609" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="245" y="526.9492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="245" y1="526.9492" y2="1049.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="255" y1="526.9492" y2="1049.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="255" y1="1049.4102" y2="1049.4102"/><rect fill="#FFFFFF" height="215.9297" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="571" x="201.5" y="180.7539"/><rect fill="#FFFFFF" height="98.3984" style="stroke: none; stroke-width: 1.0;" width="571" x="201.5" y="298.2852"/><rect fill="#FFFFFF" height="398.1953" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="708.5" x="64" y="643.2148"/><rect fill="#FFFFFF" height="97.2656" style="stroke: none; stroke-width: 1.0;" width="708.5" x="64" y="944.1445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="41" x2="41" y1="54.4883" y2="464.8164"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="41" x2="41" y1="464.8164" y2="526.9492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="41" x2="41" y1="526.9492" y2="1058.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="249.5" x2="249.5" y1="54.4883" y2="464.8164"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="249.5" x2="249.5" y1="464.8164" y2="526.9492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="249.5" x2="249.5" y1="526.9492" y2="1058.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="732.5" x2="732.5" y1="54.4883" y2="464.8164"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="732.5" x2="732.5" y1="464.8164" y2="526.9492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="732.5" x2="732.5" y1="526.9492" y2="1058.4102"/><rect fill="#9EA0CA" height="50.4883" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="66" x="8" y="3"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="25" y="33.5352">User</text><rect fill="#9EA0CA" height="50.4883" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="77" x="211.5" y="3"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="228.5" y="33.5352">Client</text><rect fill="#05D686" height="50.4883" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="59" x="703.5" y="3"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="720.5" y="33.5352">CIC</text><rect fill="#FFFFFF" height="360.1953" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="245" y="104.6211"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="245" y1="104.6211" y2="464.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="255" y1="104.6211" y2="464.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="255" y1="104.6211" y2="104.6211"/><rect fill="#FFFFFF" height="522.4609" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="245" y="526.9492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="245" y1="526.9492" y2="1049.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="255" y1="526.9492" y2="1049.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="245" x2="255" y1="1049.4102" y2="1049.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="243" x2="233" y1="104.6211" y2="100.6211"/><line style="stroke: #000000; stroke-width: 1.0;" x1="243" x2="233" y1="104.6211" y2="108.6211"/><line style="stroke: #000000; stroke-width: 1.0;" x1="41" x2="244" y1="104.6211" y2="104.6211"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="87.5" y="90.0898">Play classical music</text><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="297" y1="152.7539" y2="152.7539"/><line style="stroke: #000000; stroke-width: 1.0;" x1="297" x2="297" y1="152.7539" y2="165.7539"/><line style="stroke: #000000; stroke-width: 1.0;" x1="256" x2="297" y1="165.7539" y2="165.7539"/><polygon fill="#000000" points="266,161.7539,256,165.7539,266,169.7539,262,165.7539" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="272" y="138.2227">Create a dialogue ID (A)</text><path d="M206.5,180.7539 L282.5,180.7539 L282.5,206.7539 L272.5,216.7539 L201.5,216.7539 L201.5,185.7539 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="215.9297" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="571" x="201.5" y="180.7539"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="226.5" y="203.3555">alt</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="307.5" y="204.3555">[Voice request]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="731" x2="721" y1="290.2852" y2="286.2852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="731" x2="721" y1="290.2852" y2="294.2852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="732" y1="290.2852" y2="290.2852"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="312" x="338" y="261.6211">Send the SpeechRecognizer.Recognize event message</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="162" x="413" y="275.7539">(header.dialogRequestId: A)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="201.5" x2="772.5" y1="299.2852" y2="299.2852"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="216.5" y="320.8867">[Text request]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="731" x2="721" y1="388.6836" y2="384.6836"/><line style="stroke: #000000; stroke-width: 1.0;" x1="731" x2="721" y1="388.6836" y2="392.6836"/><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="732" y1="388.6836" y2="388.6836"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="297" x="345.5" y="360.0195">Send the TextRecognizer.Recognize event message</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="162" x="413" y="374.1523">(header.dialogRequestId: A)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="297" y1="443.8164" y2="443.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="297" x2="297" y1="443.8164" y2="456.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="256" x2="297" y1="456.8164" y2="456.8164"/><polygon fill="#000000" points="266,452.8164,256,456.8164,266,460.8164,262,456.8164" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="164" x="272" y="429.2852">Renew the latest dialogue ID</text><path d="M74,416.0059 L74,452.0059 A5,5 0 0 0 79,457.0059 L235,457.0059 A5,5 0 0 0 240,452.0059 L240,421.0059 L230,411.0059 L79,411.0059 A5,5 0 0 0 74,416.0059 " fill="#9EA0CA" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M230,411.0059 L230,418.5059 A2.5,2.5 0 0 0 232.5,421.0059 L240,421.0059 L230,411.0059 " fill="#9EA0CA" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="90" y="439.541">lastDialogueID: A</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="109" x="332.5" y="500.418">Processing request</text><line style="stroke: #000000; stroke-width: 1.0;" x1="243" x2="233" y1="567.082" y2="563.082"/><line style="stroke: #000000; stroke-width: 1.0;" x1="243" x2="233" y1="567.082" y2="571.082"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41" x2="244" y1="567.082" y2="567.082"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="160" x="63" y="552.5508">Tell me the current weather</text><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="297" y1="615.2148" y2="615.2148"/><line style="stroke: #000000; stroke-width: 1.0;" x1="297" x2="297" y1="615.2148" y2="628.2148"/><line style="stroke: #000000; stroke-width: 1.0;" x1="256" x2="297" y1="628.2148" y2="628.2148"/><polygon fill="#000000" points="266,624.2148,256,628.2148,266,632.2148,262,628.2148" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="137" x="272" y="600.6836">Create a dialogue ID (B)</text><path d="M69,643.2148 L145,643.2148 L145,669.2148 L135,679.2148 L64,679.2148 L64,648.2148 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="398.1953" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="708.5" x="64" y="643.2148"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="89" y="665.8164">alt</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="170" y="666.8164">[Task handled successfully]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="731" x2="721" y1="752.7461" y2="748.7461"/><line style="stroke: #000000; stroke-width: 1.0;" x1="731" x2="721" y1="752.7461" y2="756.7461"/><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="732" y1="752.7461" y2="752.7461"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="312" x="338" y="724.082">Send the SpeechRecognizer.Recognize event message</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="161" x="413.5" y="738.2148">(header.dialogRequestId: B)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="297" y1="800.8789" y2="800.8789"/><line style="stroke: #000000; stroke-width: 1.0;" x1="297" x2="297" y1="800.8789" y2="813.8789"/><line style="stroke: #000000; stroke-width: 1.0;" x1="256" x2="297" y1="813.8789" y2="813.8789"/><polygon fill="#000000" points="266,809.8789,256,813.8789,266,817.8789,262,813.8789" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="164" x="272" y="786.3477">Renew the latest dialogue ID</text><path d="M75,773.0684 L75,809.0684 A5,5 0 0 0 80,814.0684 L235,814.0684 A5,5 0 0 0 240,809.0684 L240,778.0684 L230,768.0684 L80,768.0684 A5,5 0 0 0 75,773.0684 " fill="#9EA0CA" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M230,768.0684 L230,775.5684 A2.5,2.5 0 0 0 232.5,778.0684 L240,778.0684 L230,768.0684 " fill="#9EA0CA" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="91" y="796.6035">lastDialogueID: B</text><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="297" y1="862.0117" y2="862.0117"/><line style="stroke: #000000; stroke-width: 1.0;" x1="297" x2="297" y1="862.0117" y2="875.0117"/><line style="stroke: #000000; stroke-width: 1.0;" x1="256" x2="297" y1="875.0117" y2="875.0117"/><polygon fill="#000000" points="266,871.0117,256,875.0117,266,879.0117,262,875.0117" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="349" x="272" y="847.4805">Stop processing tasks related to the previous dialogue ID (A)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="297" y1="923.1445" y2="923.1445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="297" x2="297" y1="923.1445" y2="936.1445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="256" x2="297" y1="936.1445" y2="936.1445"/><polygon fill="#000000" points="266,932.1445,256,936.1445,266,940.1445,262,936.1445" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="439" x="272" y="908.6133">Discard all directives related to the dialogue ID (A) from the message queue</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="64" x2="772.5" y1="945.1445" y2="945.1445"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="408" x="79" y="966.7461">[Cancel sending event messages that occurred due to exceptions]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="255" x2="297" y1="1020.4102" y2="1020.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="297" x2="297" y1="1020.4102" y2="1033.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="256" x2="297" y1="1033.4102" y2="1033.4102"/><polygon fill="#000000" points="266,1029.4102,256,1033.4102,266,1037.4102,262,1033.4102" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="364" x="272" y="1005.8789">Stop processing tasks related to the dialogue ID (A) (continued)</text><path d="M74,992.5996 L74,1028.5996 A5,5 0 0 0 79,1033.5996 L235,1033.5996 A5,5 0 0 0 240,1028.5996 L240,997.5996 L230,987.5996 L79,987.5996 A5,5 0 0 0 74,992.5996 " fill="#9EA0CA" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M230,987.5996 L230,995.0996 A2.5,2.5 0 0 0 232.5,997.5996 L240,997.5996 L230,987.5996 " fill="#9EA0CA" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="90" y="1016.1348">lastDialogueID: A</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam sequence {
	ArrowColor #000000
	ActorBorderColor #000000
	ActorFontStyle Bolder

	LifeLineBorderColor #000000
	LifeLineBackgroundColor transparent
	ParticipantBorderColor transparent
	ParticipantFontSize 14
	ParticipantFontColor #ffffff
	ParticipantFontStyle bold

	BoxBorderColor #000000
	BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
skinparam note {
	BackgroundColor #9EA0CA
	BorderColor #ffffff
	FontColor #ffffff
	FontSize 14
	FontStyle bold
}
hide footbox

participant User as user #9EA0CA
participant Client as client #9EA0CA
participant CIC as cic #05D686

user ->> client: Play classical music

activate client

  client -> client: Create a dialogue ID (A)

  alt Voice request

    client ->> cic: Send the SpeechRecognizer.Recognize event message\n(header.dialogRequestId: A)

  else Text request

    client ->> cic: Send the TextRecognizer.Recognize event message\n(header.dialogRequestId: A)

  end

  client -> client: Renew the latest dialogue ID
  
  note left: lastDialogueID: A

  ... Processing request ...

user - ->> client: Tell me the current weather

  client -> client: Create a dialogue ID (B)

  alt Task handled successfully

    client ->> cic: Send the SpeechRecognizer.Recognize event message\n(header.dialogRequestId: B)

    client -> client: Renew the latest dialogue ID
  
    note left: lastDialogueID: B

    client -> client: Stop processing tasks related to the previous dialogue ID (A)

    client -> client: Discard all directives related to the dialogue ID (A) from the message queue

  else Cancel sending event messages that occurred due to exceptions

    client -> client: Stop processing tasks related to the dialogue ID (A) (continued)

    note left: lastDialogueID: A

  end

@enduml

PlantUML version 1.2018.12(Sun Oct 21 19:15:15 KST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11+28
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: US-ASCII
Language: en
Country: KR
--></g></svg>