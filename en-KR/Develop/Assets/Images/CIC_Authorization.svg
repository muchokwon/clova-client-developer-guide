<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1096.3536px" preserveAspectRatio="none" style="width:884px;height:1096px;" version="1.1" viewBox="0 0 884 1096" width="884.0516px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="164.329" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="82.6519" y="915.0112"/><rect fill="#FFFFFF" height="218.7276" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="234.9908" y="52.2557"/><rect fill="#FFFFFF" height="24.3094" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="234.9908" y="360.4406"/><rect fill="#FFFFFF" height="450.5277" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="234.9908" y="464.4835"/><rect fill="#FFFFFF" height="50.4547" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="521.0313" y="134.3126"/><rect fill="#FFFFFF" height="368.2556" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="715.1013" y="246.6739"/><rect fill="#FFFFFF" height="39.0026" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="715.1013" y="744.415"/><rect fill="#FFFFFF" height="39.0026" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="715.1013" y="988.3699"/><rect fill="#FFFFFF" height="24.3094" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="838.2689" y="822.4203"/><rect fill="#FFFFFF" height="12.965" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="838.2689" y="1066.3752"/><rect fill="#FFFFFF" height="338.2741" rx="4.0516" ry="4.0516" style="stroke: #000000; stroke-width: 1.6206261510128914;" width="645.8195" x="172.5967" y="283.1379"/><rect fill="#FFFFFF" height="230.1796" style="stroke: none; stroke-width: 0.8103130755064457;" width="645.8195" x="172.5967" y="391.2324"/><rect fill="#FFFFFF" height="440.1013" rx="4.0516" ry="4.0516" style="stroke: #000000; stroke-width: 1.6206261510128914;" width="863.7937" x="10.5341" y="632.7564"/><rect fill="#FFFFFF" height="219.6455" style="stroke: none; stroke-width: 0.8103130755064457;" width="863.7937" x="10.5341" y="853.2122"/><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 5.0,5.0;" x1="86.7035" x2="86.7035" y1="44.1526" y2="1086.633"/><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 5.0,5.0;" x1="239.0424" x2="239.0424" y1="44.1526" y2="1086.633"/><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 5.0,5.0;" x1="525.0829" x2="525.0829" y1="44.1526" y2="1086.633"/><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 5.0,5.0;" x1="718.7477" x2="718.7477" y1="44.1526" y2="1086.633"/><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 5.0,5.0;" x1="841.9153" x2="841.9153" y1="44.1526" y2="1086.633"/><rect fill="#9EA0CA" height="40.9113" rx="4.0516" ry="4.0516" style="stroke: #FFFFFF; stroke-width: 1.2154696132596685;" width="136.1326" x="18.6372" y="2.4309"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11.3444" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108.582" x="32.4125" y="27.174">Client without GUI</text><rect fill="#9EA0CA" height="40.9113" rx="4.0516" ry="4.0516" style="stroke: #FFFFFF; stroke-width: 1.2154696132596685;" width="116.6851" x="180.6998" y="2.4309"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11.3444" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89.1344" x="194.4751" y="27.174">Client with GUI</text><rect fill="#05D686" height="40.9113" rx="4.0516" ry="4.0516" style="stroke: #FFFFFF; stroke-width: 1.2154696132596685;" width="189.6133" x="430.2762" y="2.4309"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11.3444" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162.0626" x="444.0516" y="27.174">NAVER authorization server</text><rect fill="#05D686" height="40.9113" rx="4.0516" ry="4.0516" style="stroke: #FFFFFF; stroke-width: 1.2154696132596685;" width="182.3204" x="627.9926" y="2.4309"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11.3444" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154.7698" x="641.768" y="27.174">Clova authorization server</text><rect fill="#05D686" height="40.9113" rx="4.0516" ry="4.0516" style="stroke: #FFFFFF; stroke-width: 1.2154696132596685;" width="47.8085" x="818.4162" y="2.4309"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11.3444" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20.2578" x="832.1915" y="27.174">CIC</text><rect fill="#FFFFFF" height="164.329" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="82.6519" y="915.0112"/><rect fill="#FFFFFF" height="218.7276" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="234.9908" y="52.2557"/><rect fill="#FFFFFF" height="24.3094" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="234.9908" y="360.4406"/><rect fill="#FFFFFF" height="450.5277" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="234.9908" y="464.4835"/><rect fill="#FFFFFF" height="50.4547" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="521.0313" y="134.3126"/><rect fill="#FFFFFF" height="368.2556" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="715.1013" y="246.6739"/><rect fill="#FFFFFF" height="39.0026" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="715.1013" y="744.415"/><rect fill="#FFFFFF" height="39.0026" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="715.1013" y="988.3699"/><rect fill="#FFFFFF" height="24.3094" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="838.2689" y="822.4203"/><rect fill="#FFFFFF" height="12.965" style="stroke: #000000; stroke-width: 0.8103130755064457;" width="8.1031" x="838.2689" y="1066.3752"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="277.1271" y1="84.7758" y2="84.7758"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="277.1271" x2="277.1271" y1="84.7758" y2="95.3099"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.9042" x2="277.1271" y1="95.3099" y2="95.3099"/><polygon fill="#000000" points="252.0074,92.0687,243.9042,95.3099,252.0074,98.5512,248.7661,95.3099" style="stroke: #000000; stroke-width: 0.8103130755064457;"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="57.5322" x="256.8692" y="73.001">NAVER login</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="519.4107" x2="511.3076" y1="134.3126" y2="131.0713"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="519.4107" x2="511.3076" y1="134.3126" y2="137.5538"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="520.221" y1="134.3126" y2="134.3126"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="153.1492" x="305.488" y="122.5377">Send NAVER account information</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="251.1971" y1="184.7672" y2="181.526"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="251.1971" y1="184.7672" y2="188.0085"/><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 2.0,2.0;" x1="243.0939" x2="524.2726" y1="184.7672" y2="184.7672"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="97.2376" x="335.4696" y="161.5403">Send NAVER account</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="59.9632" x="354.1068" y="172.9923">access token</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="713.4807" x2="705.3775" y1="246.6739" y2="243.4326"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="713.4807" x2="705.3775" y1="246.6739" y2="249.9151"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="714.291" y1="246.6739" y2="246.6739"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="239.8527" x="359.1713" y="211.995">Request authorization code (send next information)</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="143.4254" x="359.1713" y="223.447">- NAVER account access token</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="222.0258" x="359.1713" y="234.899">- Client credentials (CLOVA_OAUTH_CLIENT_ID)</text><path d="M176.6483,283.1379 L238.232,283.1379 L238.232,304.2061 L230.1289,312.3092 L172.5967,312.3092 L172.5967,287.1895 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.8103130755064457;"/><rect fill="none" height="338.2741" rx="4.0516" ry="4.0516" style="stroke: #000000; stroke-width: 1.6206261510128914;" width="645.8195" x="172.5967" y="283.1379"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="12.965" x="192.8545" y="301.4523">alt</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="299.0055" x="258.4899" y="302.2626">["Status of Terms and Conditions agreement" == "Agreed"]</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="251.1971" y1="360.4406" y2="357.1993"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="251.1971" y1="360.4406" y2="363.6818"/><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 2.0,2.0;" x1="243.0939" x2="714.291" y1="360.4406" y2="360.4406"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="158.8214" x="399.6869" y="348.6657">Send authorization code (200 OK)</text><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 2.0,2.0;" x1="172.5967" x2="818.4162" y1="392.0428" y2="392.0428"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="310.3499" x="184.7514" y="409.5468">[Status of Terms and Conditions agreement == "Not agreed"]</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="251.1971" y1="464.4835" y2="461.2422"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="251.1971" y1="464.4835" y2="467.7247"/><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 2.0,2.0;" x1="243.0939" x2="714.291" y1="464.4835" y2="464.4835"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="146.6667" x="394.0147" y="441.2566">Send authorization, redirect_uri</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="170.1657" x="394.0147" y="452.7086">(451 Unavailable For Legal Reasons)</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="277.1271" y1="503.4861" y2="503.4861"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="277.1271" x2="277.1271" y1="503.4861" y2="514.0202"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.9042" x2="277.1271" y1="514.0202" y2="514.0202"/><polygon fill="#000000" points="252.0074,510.7789,243.9042,514.0202,252.0074,517.2615,248.7661,514.0202" style="stroke: #000000; stroke-width: 0.8103130755064457;"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="250.3867" x="256.8692" y="491.7113">Move to the Terms and Conditions page (redirect_uri)</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="713.4807" x2="705.3775" y1="553.0228" y2="549.7816"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="713.4807" x2="705.3775" y1="553.0228" y2="556.2641"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="714.291" y1="553.0228" y2="553.0228"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="318.453" x="319.8711" y="541.248">Send result of user agreement to the Terms and Conditions (submit)</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="251.1971" y1="614.9295" y2="611.6882"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="251.1971" y1="614.9295" y2="618.1708"/><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 2.0,2.0;" x1="243.0939" x2="718.3425" y1="614.9295" y2="614.9295"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="112.6335" x="391.5838" y="580.2506">Send result (302 Found)</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="179.0792" x="391.5838" y="591.7026">- Success: clova://agreement-success</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="167.7348" x="391.5838" y="603.1546">- Failure: clova://agreement-failure</text><path d="M14.5856,632.7564 L76.1694,632.7564 L76.1694,653.8245 L68.0663,661.9277 L10.5341,661.9277 L10.5341,636.808 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.8103130755064457;"/><rect fill="none" height="440.1013" rx="4.0516" ry="4.0516" style="stroke: #000000; stroke-width: 1.6206261510128914;" width="863.7937" x="10.5341" y="632.7564"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="12.965" x="30.7919" y="651.0707">alt</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176.6483" x="96.4273" y="651.881">["Client type" == "Client with GUI"]</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="713.4807" x2="705.3775" y1="744.415" y2="741.1737"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="713.4807" x2="705.3775" y1="744.415" y2="747.6563"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="714.291" y1="744.415" y2="744.415"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="241.4733" x="333.2413" y="698.2841">Request Clova access token (send next information)</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="143.4254" x="333.2413" y="709.7361">- NAVER account access token</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="89.1344" x="333.2413" y="721.1881">- Client credentials</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="285.2302" x="339.7238" y="732.6401">(CLOVA_OAUTH_CLIENT_ID, CLOVA_OAUTH_CLIENT_SECRET)</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="251.1971" y1="783.4176" y2="780.1764"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="251.1971" y1="783.4176" y2="786.6589"/><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 2.0,2.0;" x1="243.0939" x2="718.3425" y1="783.4176" y2="783.4176"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="114.2541" x="423.9963" y="771.6428">Send Clova access token</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="836.6483" x2="828.5451" y1="822.4203" y2="819.179"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="836.6483" x2="828.5451" y1="822.4203" y2="825.6615"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="243.0939" x2="837.4586" y1="822.4203" y2="822.4203"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="223.6464" x="428.8582" y="810.6454">Start connection to CIC using Clova access token</text><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 2.0,2.0;" x1="10.5341" x2="874.3278" y1="854.0225" y2="854.0225"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="193.6648" x="22.6888" y="871.5265">["Client type" == "Client without GUI"]</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="90.7551" x2="98.8582" y1="915.0112" y2="911.77"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="90.7551" x2="98.8582" y1="915.0112" y2="918.2525"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="90.7551" x2="238.232" y1="915.0112" y2="915.0112"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="112.6335" x="108.582" y="903.2364">Send authorization code</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="713.4807" x2="705.3775" y1="988.3699" y2="985.1286"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="713.4807" x2="705.3775" y1="988.3699" y2="991.6111"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="90.7551" x2="714.291" y1="988.3699" y2="988.3699"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="241.4733" x="257.0718" y="942.239">Request Clova access token (send next information)</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="143.4254" x="257.0718" y="953.691">- NAVER account access token</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="89.1344" x="257.0718" y="965.143">- Client credentials</text><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="285.2302" x="263.5543" y="976.595">(CLOVA_OAUTH_CLIENT_ID, CLOVA_OAUTH_CLIENT_SECRET)</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="90.7551" x2="98.8582" y1="1027.3725" y2="1024.1313"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="90.7551" x2="98.8582" y1="1027.3725" y2="1030.6138"/><line style="stroke: #000000; stroke-width: 0.8103130755064457; stroke-dasharray: 2.0,2.0;" x1="90.7551" x2="718.3425" y1="1027.3725" y2="1027.3725"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="114.2541" x="347.8269" y="1015.5977">Send Clova access token</text><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="836.6483" x2="828.5451" y1="1066.3752" y2="1063.1339"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="836.6483" x2="828.5451" y1="1066.3752" y2="1069.6164"/><line style="stroke: #000000; stroke-width: 0.8103130755064457;" x1="90.7551" x2="837.4586" y1="1066.3752" y2="1066.3752"/><text fill="#000000" font-family="sans-serif" font-size="9.7238" lengthAdjust="spacingAndGlyphs" textLength="223.6464" x="352.6888" y="1054.6003">Start connection to CIC using Clova access token</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam sequence {
	ArrowColor #000000
	ActorBorderColor #000000
	ActorFontStyle Bolder

	LifeLineBorderColor #000000
	LifeLineBackgroundColor transparent
	ParticipantBorderColor transparent
	ParticipantFontSize 14
	ParticipantFontColor #ffffff
	ParticipantFontStyle bold

	BoxBorderColor #000000
	BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
skinparam note {
	BackgroundColor #9EA0CA
	BorderColor #ffffff
	FontColor #ffffff
	FontSize 14
	FontStyle bold
}
hide footbox

participant "Client without GUI" as device #9EA0CA
participant "Client with GUI" as app #9EA0CA
participant "NAVER authorization server" as nauth #05D686
participant "Clova authorization server" as cauth #05D686
participant CIC as cic #05D686

activate app
  app -> app: NAVER login

  app ->> nauth: Send NAVER account information

  activate nauth
    nauth - ->> app: Send NAVER account\naccess token
  deactivate nauth

  app ->> cauth: Request authorization code (send next information)\l- NAVER account access token\l- Client credentials (CLOVA_OAUTH_CLIENT_ID)

activate cauth

deactivate app

alt "Status of Terms and Conditions agreement" == "Agreed"
    cauth - ->> app: Send authorization code (200 OK)
    activate app
    deactivate app
else Status of Terms and Conditions agreement == "Not agreed"
  cauth - ->> app: Send authorization, redirect_uri\l(451 Unavailable For Legal Reasons)
  activate app
    app -> app: Move to the Terms and Conditions page (redirect_uri)
    app ->> cauth: Send result of user agreement to the Terms and Conditions (submit)
    cauth - ->> app: Send result (302 Found)\l- Success: clova://agreement-success\l- Failure: clova://agreement-failure
  deactivate cauth
end

alt "Client type" == "Client with GUI"
  app ->> cauth: Request Clova access token (send next information)\l- NAVER account access token\l- Client credentials\l  (CLOVA_OAUTH_CLIENT_ID, CLOVA_OAUTH_CLIENT_SECRET)

  activate cauth
    cauth - ->> app: Send Clova access token
  deactivate cauth

  app ->> cic: Start connection to CIC using Clova access token
  activate cic
  deactivate cic

else "Client type" == "Client without GUI"
  app ->> device: Send authorization code
  deactivate app

  activate device
    device ->> cauth: Request Clova access token (send next information)\l- NAVER account access token\l- Client credentials\l  (CLOVA_OAUTH_CLIENT_ID, CLOVA_OAUTH_CLIENT_SECRET)

    activate cauth
        cauth - ->> device: Send Clova access token
    deactivate cauth

    device ->> cic: Start connection to CIC using Clova access token

    activate cic
  end

@enduml

PlantUML version 1.2018.12(Sun Oct 21 19:15:15 KST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11+28
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: US-ASCII
Language: en
Country: KR
--></g></svg>