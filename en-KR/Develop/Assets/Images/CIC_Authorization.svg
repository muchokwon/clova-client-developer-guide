<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1151.5473px" preserveAspectRatio="none" style="width:883px;height:1151px;" version="1.1" viewBox="0 0 883 1151" width="883.8904px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="174.724" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="76.2511" y="960.9195"/><rect fill="#FFFFFF" height="229.7804" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="253.6516" y="53.4691"/><rect fill="#FFFFFF" height="23.3422" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="253.6516" y="377.6141"/><rect fill="#FFFFFF" height="474.9355" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="253.6516" y="485.9841"/><rect fill="#FFFFFF" height="54.0916" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="548.5411" y="137.9056"/><rect fill="#FFFFFF" height="384.6479" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="727.1088" y="259.9073"/><rect fill="#FFFFFF" height="40.273" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="727.1088" y="785.8221"/><rect fill="#FFFFFF" height="40.273" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="727.1088" y="1042.6483"/><rect fill="#FFFFFF" height="23.3422" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="840.7073" y="866.3682"/><rect fill="#FFFFFF" height="12.4492" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="840.7073" y="1123.1943"/><rect fill="#FFFFFF" height="355.8592" rx="3.8904" ry="3.8904" style="stroke: #000000; stroke-width: 1.5561450044208665;" width="625.5703" x="196.8523" y="294.9206"/><rect fill="#FFFFFF" height="243.5989" style="stroke: none; stroke-width: 0.7780725022104332;" width="625.5703" x="196.8523" y="407.1809"/><rect fill="#FFFFFF" height="467.7461" rx="3.8904" ry="3.8904" style="stroke: #000000; stroke-width: 1.5561450044208665;" width="864.4385" x="10.1149" y="661.6729"/><rect fill="#FFFFFF" height="233.484" style="stroke: none; stroke-width: 0.7780725022104332;" width="864.4385" x="10.1149" y="895.9349"/><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 5.0,5.0;" x1="80.1415" x2="80.1415" y1="45.6884" y2="1142.6462"/><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 5.0,5.0;" x1="257.542" x2="257.542" y1="45.6884" y2="1142.6462"/><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 5.0,5.0;" x1="552.4315" x2="552.4315" y1="45.6884" y2="1142.6462"/><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 5.0,5.0;" x1="730.6101" x2="730.6101" y1="45.6884" y2="1142.6462"/><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 5.0,5.0;" x1="844.2087" x2="844.2087" y1="45.6884" y2="1142.6462"/><rect fill="#9EA0CA" height="42.5761" rx="3.8904" ry="3.8904" style="stroke: #FFFFFF; stroke-width: 1.16710875331565;" width="124.4916" x="17.8957" y="2.3342"/><text fill="#FFFFFF" font-family="Noto Sans CJK KR" font-size="10.893" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98.0371" x="31.1229" y="28.1973">Client without GUI</text><rect fill="#9EA0CA" height="42.5761" rx="3.8904" ry="3.8904" style="stroke: #FFFFFF; stroke-width: 1.16710875331565;" width="105.8179" x="204.6331" y="2.3342"/><text fill="#FFFFFF" font-family="Noto Sans CJK KR" font-size="10.893" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79.3634" x="217.8603" y="28.1973">Client with GUI</text><rect fill="#05D686" height="42.5761" rx="3.8904" ry="3.8904" style="stroke: #FFFFFF; stroke-width: 1.16710875331565;" width="174.2882" x="465.2874" y="2.3342"/><text fill="#FFFFFF" font-family="Noto Sans CJK KR" font-size="10.893" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147.8338" x="478.5146" y="28.1973">NAVER authorization server</text><rect fill="#05D686" height="42.5761" rx="3.8904" ry="3.8904" style="stroke: #FFFFFF; stroke-width: 1.16710875331565;" width="167.2856" x="647.3563" y="2.3342"/><text fill="#FFFFFF" font-family="Noto Sans CJK KR" font-size="10.893" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140.8311" x="660.5836" y="28.1973">Clova authorization server</text><rect fill="#05D686" height="42.5761" rx="3.8904" ry="3.8904" style="stroke: #FFFFFF; stroke-width: 1.16710875331565;" width="44.3501" x="822.4226" y="2.3342"/><text fill="#FFFFFF" font-family="Noto Sans CJK KR" font-size="10.893" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17.8957" x="835.6499" y="28.1973">CIC</text><rect fill="#FFFFFF" height="174.724" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="76.2511" y="960.9195"/><rect fill="#FFFFFF" height="229.7804" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="253.6516" y="53.4691"/><rect fill="#FFFFFF" height="23.3422" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="253.6516" y="377.6141"/><rect fill="#FFFFFF" height="474.9355" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="253.6516" y="485.9841"/><rect fill="#FFFFFF" height="54.0916" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="548.5411" y="137.9056"/><rect fill="#FFFFFF" height="384.6479" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="727.1088" y="259.9073"/><rect fill="#FFFFFF" height="40.273" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="727.1088" y="785.8221"/><rect fill="#FFFFFF" height="40.273" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="727.1088" y="1042.6483"/><rect fill="#FFFFFF" height="23.3422" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="840.7073" y="866.3682"/><rect fill="#FFFFFF" height="12.4492" style="stroke: #000000; stroke-width: 0.7780725022104332;" width="7.7807" x="840.7073" y="1123.1943"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="294.1114" y1="87.5176" y2="87.5176"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="294.1114" x2="294.1114" y1="87.5176" y2="97.6325"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="262.2104" x2="294.1114" y1="97.6325" y2="97.6325"/><polygon fill="#000000" points="269.9912,94.5202,262.2104,97.6325,269.9912,100.7448,266.8789,97.6325" style="stroke: #000000; stroke-width: 0.7780725022104332;"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="80.1415" x="274.6596" y="75.1929">Logs in to NAVER</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="546.985" x2="539.2042" y1="137.9056" y2="134.7933"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="546.985" x2="539.2042" y1="137.9056" y2="141.0179"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="547.763" y1="137.9056" y2="137.9056"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="163.3952" x="323.2891" y="125.5809">Sends NAVER account information</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="269.2131" y1="191.9972" y2="188.8849"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="269.2131" y1="191.9972" y2="195.1095"/><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 2.0,2.0;" x1="261.4324" x2="551.6534" y1="191.9972" y2="191.9972"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="120.6012" x="346.6313" y="165.8539">Sends the NAVER account</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="59.9116" x="376.9761" y="179.6725">access token</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="725.5526" x2="717.7719" y1="259.9073" y2="256.795"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="725.5526" x2="717.7719" y1="259.9073" y2="263.0196"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="726.3307" y1="259.9073" y2="259.9073"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="294.1114" x="347.2149" y="219.9455">Requests the authorization code (Sends the next information)</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="140.0531" x="347.2149" y="233.7641">- NAVER account access token</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="224.863" x="347.2149" y="247.5827">- Client credentials (CLOVA_OAUTH_CLIENT_ID)</text><path d="M200.7427,294.9206 L259.8762,294.9206 L259.8762,317.4847 L252.0955,325.2654 L196.8523,325.2654 L196.8523,298.811 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.7780725022104332;"/><rect fill="none" height="355.8592" rx="3.8904" ry="3.8904" style="stroke: #000000; stroke-width: 1.5561450044208665;" width="625.5703" x="196.8523" y="294.9206"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="12.4492" x="216.3042" y="314.3102">alt</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="278.55" x="279.328" y="315.0882">["Status of Terms and Conditions agreement" == "Agreed"]</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="269.2131" y1="377.6141" y2="374.5019"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="269.2131" y1="377.6141" y2="380.7264"/><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 2.0,2.0;" x1="261.4324" x2="726.3307" y1="377.6141" y2="377.6141"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="181.2909" x="403.6251" y="365.2895">Sends the authorization code (200 OK)</text><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 2.0,2.0;" x1="196.8523" x2="822.4226" y1="407.959" y2="407.959"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="286.3307" x="208.5234" y="426.5705">[Status of Terms and Conditions agreement == "Not agreed"]</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="269.2131" y1="485.9841" y2="482.8718"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="269.2131" y1="485.9841" y2="489.0964"/><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 2.0,2.0;" x1="261.4324" x2="726.3307" y1="485.9841" y2="485.9841"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="177.4005" x="405.5703" y="459.8409">Sends the authorization, redirect_uri</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="169.6198" x="405.5703" y="473.6594">(451 Unavailable For Legal Reasons)</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="294.1114" y1="526.2571" y2="526.2571"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="294.1114" x2="294.1114" y1="526.2571" y2="536.3721"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="262.2104" x2="294.1114" y1="536.3721" y2="536.3721"/><polygon fill="#000000" points="269.9912,533.2598,262.2104,536.3721,269.9912,539.4844,266.8789,536.3721" style="stroke: #000000; stroke-width: 0.7780725022104332;"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="260.6543" x="274.6596" y="513.9325">Moves to the Terms and Conditions page (redirect_uri)</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="725.5526" x2="717.7719" y1="576.6451" y2="573.5328"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="725.5526" x2="717.7719" y1="576.6451" y2="579.7574"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="726.3307" y1="576.6451" y2="576.6451"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="347.7984" x="320.3714" y="564.3204">Sends the result of user agreement to the Terms and Conditions (submit)</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="269.2131" y1="644.5553" y2="641.443"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="269.2131" y1="644.5553" y2="647.6676"/><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 2.0,2.0;" x1="261.4324" x2="730.221" y1="644.5553" y2="644.5553"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="136.1627" x="409.0716" y="604.5935">Sends the result (302 Found)</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="174.2882" x="409.0716" y="618.412">- Success: clova://agreement-success</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="168.0637" x="409.0716" y="632.2306">- Failure: clova://agreement-failure</text><path d="M14.0053,661.6729 L73.1388,661.6729 L73.1388,684.237 L65.3581,692.0177 L10.1149,692.0177 L10.1149,665.5632 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.7780725022104332;"/><rect fill="none" height="467.7461" rx="3.8904" ry="3.8904" style="stroke: #000000; stroke-width: 1.5561450044208665;" width="864.4385" x="10.1149" y="661.6729"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="12.4492" x="29.5668" y="681.0624">alt</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="167.2856" x="92.5906" y="681.8405">["Client type" == "Client with GUI"]</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="725.5526" x2="717.7719" y1="785.8221" y2="782.7098"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="725.5526" x2="717.7719" y1="785.8221" y2="788.9344"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="726.3307" y1="785.8221" y2="785.8221"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="287.8868" x="346.4368" y="732.0417">Requests the Clova access token (Send the next information)</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="140.0531" x="346.4368" y="745.8603">- NAVER account access token</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="89.4783" x="346.4368" y="759.6789">- Client credentials</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="290.9991" x="351.1052" y="773.4974">(CLOVA_OAUTH_CLIENT_ID, CLOVA_OAUTH_CLIENT_SECRET)</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="269.2131" y1="826.0951" y2="822.9829"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="269.2131" y1="826.0951" y2="829.2074"/><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 2.0,2.0;" x1="261.4324" x2="730.221" y1="826.0951" y2="826.0951"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="137.7188" x="427.3563" y="813.7705">Sends the Clova access token</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="839.1512" x2="831.3705" y1="866.3682" y2="863.2559"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="839.1512" x2="831.3705" y1="866.3682" y2="869.4805"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="261.4324" x2="839.9293" y1="866.3682" y2="866.3682"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="251.3174" x="425.4111" y="854.0435">Starts connection to CIC using the Clova access token</text><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 2.0,2.0;" x1="10.1149" x2="874.5535" y1="896.713" y2="896.713"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="183.6251" x="21.786" y="915.3245">["Client type" == "Client without GUI"]</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="84.0318" x2="91.8126" y1="960.9195" y2="957.8073"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="84.0318" x2="91.8126" y1="960.9195" y2="964.0318"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="84.0318" x2="256.7639" y1="960.9195" y2="960.9195"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="139.275" x="101.1494" y="948.5949">Sends the authorization code</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="725.5526" x2="717.7719" y1="1042.6483" y2="1039.536"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="725.5526" x2="717.7719" y1="1042.6483" y2="1045.7606"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="84.0318" x2="726.3307" y1="1042.6483" y2="1042.6483"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="292.5553" x="257.7365" y="988.8679">Requests the Clova access token (Sends the next information)</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="140.0531" x="257.7365" y="1002.6865">- NAVER account access token</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="89.4783" x="257.7365" y="1016.505">- Client credentials</text><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="290.9991" x="262.405" y="1030.3236">(CLOVA_OAUTH_CLIENT_ID, CLOVA_OAUTH_CLIENT_SECRET)</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="84.0318" x2="91.8126" y1="1082.9213" y2="1079.809"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="84.0318" x2="91.8126" y1="1082.9213" y2="1086.0336"/><line style="stroke: #000000; stroke-width: 0.7780725022104332; stroke-dasharray: 2.0,2.0;" x1="84.0318" x2="730.221" y1="1082.9213" y2="1082.9213"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="137.7188" x="338.6561" y="1070.5966">Sends the Clova access token</text><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="839.1512" x2="831.3705" y1="1123.1943" y2="1120.0821"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="839.1512" x2="831.3705" y1="1123.1943" y2="1126.3066"/><line style="stroke: #000000; stroke-width: 0.7780725022104332;" x1="84.0318" x2="839.9293" y1="1123.1943" y2="1123.1943"/><text fill="#000000" font-family="Noto Sans CJK KR" font-size="9.3369" lengthAdjust="spacingAndGlyphs" textLength="251.3174" x="336.7109" y="1110.8697">Starts connection to CIC using the Clova access token</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam defaultFontName "Noto Sans CJK KR"

skinparam note {
  BackgroundColor #9EA0CA
  BorderColor #ffffff
  FontColor #ffffff
  FontSize 14
  FontStyle bold
}

skinparam sequence {
  ArrowColor #000000
  ActorBorderColor #000000
  ActorFontStyle Bolder


  LifeLineBorderColor #000000
  LifeLineBackgroundColor transparent
  ParticipantBorderColor transparent
  ParticipantFontSize 14
  ParticipantFontColor #ffffff
  ParticipantFontStyle bold

  BoxBorderColor #000000
  BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
hide footbox

skinparam activity {
  BackgroundColor #9EA0CA
  BarColor #ffffff
  BorderColor #ffffff
  DiamondBackgroundColor #05D686
  DiamondBorderColor #ffffff
  DiamondFontColor #ffffff
  DiamondFontSize 14
  DiamondFontStyle bold
  FontColor #ffffff 
  FontSize 14
  FontStyle bold
}

participant "Client without GUI" as device #9EA0CA
participant "Client with GUI" as app #9EA0CA
participant "NAVER authorization server" as nauth #05D686
participant "Clova authorization server" as cauth #05D686
participant CIC as cic #05D686

activate app
  app -> app: Logs in to NAVER

  app ->> nauth: Sends NAVER account information

  activate nauth
    nauth - ->> app: Sends the NAVER account\naccess token
  deactivate nauth

  app ->> cauth: Requests the authorization code (Sends the next information)\l- NAVER account access token\l- Client credentials (CLOVA_OAUTH_CLIENT_ID)

activate cauth

deactivate app

alt "Status of Terms and Conditions agreement" == "Agreed"
    cauth - ->> app: Sends the authorization code (200 OK)
    activate app
    deactivate app
else Status of Terms and Conditions agreement == "Not agreed"
  cauth - ->> app: Sends the authorization, redirect_uri\l(451 Unavailable For Legal Reasons)
  activate app
    app -> app: Moves to the Terms and Conditions page (redirect_uri)
    app ->> cauth: Sends the result of user agreement to the Terms and Conditions (submit)
    cauth - ->> app: Sends the result (302 Found)\l- Success: clova://agreement-success\l- Failure: clova://agreement-failure
  deactivate cauth
end

alt "Client type" == "Client with GUI"
  app ->> cauth: Requests the Clova access token (Send the next information)\l- NAVER account access token\l- Client credentials\l  (CLOVA_OAUTH_CLIENT_ID, CLOVA_OAUTH_CLIENT_SECRET)

  activate cauth
    cauth - ->> app: Sends the Clova access token
  deactivate cauth

  app ->> cic: Starts connection to CIC using the Clova access token
  activate cic
  deactivate cic

else "Client type" == "Client without GUI"
  app ->> device: Sends the authorization code
  deactivate app

  activate device
    device ->> cauth: Requests the Clova access token (Sends the next information)\l- NAVER account access token\l- Client credentials\l  (CLOVA_OAUTH_CLIENT_ID, CLOVA_OAUTH_CLIENT_SECRET)

    activate cauth
        cauth - ->> device: Sends the Clova access token
    deactivate cauth

    device ->> cic: Starts connection to CIC using the Clova access token

    activate cic
  end

@enduml

PlantUML version 1.2019.09(Tue Aug 27 01:19:51 KST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11+28
Operating System: Mac OS X
OS Version: 10.15
Default Encoding: UTF-8
Language: en
Country: KR
--></g></svg>